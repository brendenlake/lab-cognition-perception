
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>6. The Format and Structure of Digital Data &#8212; Lab in C&amp;P (Fall 2021)</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.e8e5499552300ddf5d7adccae7cc3b70.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/nyustyle.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="7. Visualizing Data" href="../06/00-plots.html" />
    <link rel="prev" title="5. A brief introduction to research design" href="../04/00-researchdesign.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      <img src="../../_static/artificialintelligence.svg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Lab in C&P (Fall 2021)</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <p class="caption">
 <span class="caption-text">
  Overview
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../course-content/syllabus.html">
   Syllabus
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../course-content/schedule.html">
   Schedule
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Resources
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://edstem.org/us/courses/8295/discussion/">
   EdStem
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Textbook
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../00/00-cogsci.html">
   1. What is Cognitive Science and how do we study it?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../01/00-whystats.html">
   2. Why do we have to learn statistics?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../02/00-jupyter.html">
   3. Introduction to Jupyter
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../03/00-python.html">
   4. Intro to Python for Psychology Undergrads
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../04/00-researchdesign.html">
   5. A brief introduction to research design
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   6. The Format and Structure of Digital Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../06/00-plots.html">
   7. Visualizing Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../07/00-describingdata.html">
   8. Describing Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../08/01-sampling.html">
   9. Samples, populations and sampling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../09/00-hypothesistesting.html">
   10. Hypothesis testing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../10/00-ttest.html">
   11. Comparing one or two means
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../11/00-inferences-from-behavior.html">
   12. Measuring Behavior
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../21/00-ethics-irb.html">
   13. Research Ethics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../13/00-linearregression.html">
   14. Linear regression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../14/00-logisticregression.html">
   15. Logistic regression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../15/00-mixed-effect.html">
   16. Linear Mixed Effect Modeling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../16/00-mentalsimulation.html">
   17. Mental Imagery, Mental Simulation, and Mental Rotation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../17/00-mri.html">
   18. Magnetic Resonance Imaging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../24/00-what-next.html">
   19. What Next?
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Labs &amp; Homeworks
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../00/cogsci-ica.html">
   Intro to CogSci ICA
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../homeworks/Homework1.html">
   Intro to Jupyter (HW1)
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Tips &amp; Tricks
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../tips/pythonresources.html">
   Python Resources
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../tips/plottingresources.html">
   Plotting in Python Resources
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../tips/fortyforloops.html">
   Intro to For loops
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../tips/nyu-jupyterhub.html">
   NYU JupyterHub Setup
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../tips/ultimate-guide-ttest-python.html">
   Ultimate t-test guide
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../LICENSE.html">
   License
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/chapters/05/00-data.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        
        <a class="jupyterhub-button" href="https://psychua-46-fall.rcnyu.org//hub/user-redirect/git-pull?repo=https://github.com/executablebooks/jupyter-book&urlpath=tree/jupyter-book/chapters/05/00-data.ipynb&branch=master"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch JupyterHub" data-toggle="tooltip"
                data-placement="left"><img class="jupyterhub-button-logo"
                    src="../../_static/images/logo_jupyterhub.svg"
                    alt="Interact on JupyterHub">JupyterHub</button></a>
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#video-lecture">
   6.1. Video Lecture
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-to-think-about-data-and-organize-it">
   6.2. How to think about data and organize it
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#common-file-formats-for-data">
   6.3. Common file formats for data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#excel-workbooks-xls-xslx-files">
     6.3.1. Excel Workbooks (.xls, .xslx files)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comma-separated-values-csv-files">
     6.3.2. Comma-separated Values (.csv files)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tab-separated-values-tsv-files">
     6.3.3. Tab-separated Values (.tsv files)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exporting-from-spreadsheet-programs">
   6.4. Exporting from spreadsheet programs
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#google-sheets">
     6.4.1. Google Sheets
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#excel">
     6.4.2. Excel
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#uploading-csv-files-to-jupyterhub">
   6.5. Uploading csv files to JupyterHub
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-pandas-library-and-the-concept-of-a-dataframe-api">
   6.6. The Pandas library and the concept of a dataframe API
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reading-data-e-g-csvs-into-python-using-pandas">
   6.7. Reading data (e.g., csvs) into Python using Pandas
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#viewing-the-data-in-a-dataframe">
   6.8. Viewing the data in a dataframe
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#accessing-individual-columns">
     6.8.1. Accessing individual columns
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#accessing-individal-rows">
     6.8.2. Accessing individal rows
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#indexes-and-columns">
     6.8.3. Indexes and Columns
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#adding-and-deleting-things-from-a-dataframe">
   6.9. Adding and deleting things from a dataframe
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#deleting-rows">
     6.9.1. Deleting rows
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#deleting-columns">
     6.9.2. Deleting columns
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#adding-rows">
     6.9.3. Adding rows
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#adding-columns">
     6.9.4. Adding columns
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#deleting-rows-with-missing-data">
     6.9.5. Deleting rows with missing data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#getting-individual-values-and-changing-them">
     6.9.6. Getting individual values and changing them
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#checking-the-size-dimensions-of-your-data">
     6.9.7. Checking the size/dimensions of your data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#things-you-can-do-with-dataframes">
   6.10. Things you can do with dataframes
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sorting">
     6.10.1. Sorting
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#arithmetic">
     6.10.2. Arithmetic
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#slicing">
     6.10.3. Slicing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#selecting">
     6.10.4. Selecting
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#iteration">
     6.10.5. Iteration
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-organization-tidy-and-wide-formats">
   6.11. Data organization - tidy and wide formats
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-is-tidy-data-and-why-use-it">
     6.11.1. What is tidy data, and why use it?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-case-example-organizing-data-for-an-psychological-experiment">
     6.11.2. A case example: organizing data for an psychological experiment
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-split-apply-combine-workflow">
   6.12. The Split-Apply-Combine Workflow
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#changing-the-apply-step">
     6.12.1. Changing the “apply” step
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#aggregation">
       6.12.1.1. Aggregation
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#transform">
       6.12.1.2. Transform
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#filtration">
       6.12.1.3. Filtration
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#further-reading-and-resources">
   6.13. Further Reading and Resources
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#references">
   6.14. References
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="the-format-and-structure-of-digital-data">
<h1><span class="section-number">6. </span>The Format and Structure of Digital Data<a class="headerlink" href="#the-format-and-structure-of-digital-data" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This chapter authored by <a class="reference external" href="http://gureckislab.org/~gureckis">Todd M. Gureckis</a> and <a class="reference external" href="http://kelseymoty.github.io">Kelsey Moty</a> and is released under the <a class="reference internal" href="../../LICENSE.html"><span class="doc std std-doc">license for this book</span></a>.</p>
</div>
<div class="section" id="video-lecture">
<h2><span class="section-number">6.1. </span>Video Lecture<a class="headerlink" href="#video-lecture" title="Permalink to this headline">¶</a></h2>
<p>This video provides an complementary overview of this chapter.  There are things mentioned in the chapter not mentioned in the video and vice versa.  Together they give an overview of this unit so please read and watch.</p>
<center>
<iframe src="https://player.vimeo.com/video/520946467" width="640" height="360" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
</center></div>
<div class="section" id="how-to-think-about-data-and-organize-it">
<h2><span class="section-number">6.2. </span>How to think about data and organize it<a class="headerlink" href="#how-to-think-about-data-and-organize-it" title="Permalink to this headline">¶</a></h2>
<p>Data is an important concept in science.  The first step is we measure something.   In a <a class="reference internal" href="../04/00-researchdesign.html"><span class="doc std std-doc">previous chapter we discuss issues in measurement</span></a> including different types of scales, units, etc…  However the main thing is that data is born when a number is assigned to some observation we make.  Here is a lonely single number which maybe measures something:</p>
<div style="text-align: center">
    <img src="./images/single_number.png" width="150">
</div><p>Things get more interesting when we make multiple observations and so we have many data.  In order to do anything with more than one number though we start running into the question of how to organize things.  How do we keep track of which number was collected first, second or third for instance?  If we have just a big jumble of numbers we can easily get lost.</p>
<p>Before we get too many numbers we need to start thinking abstractly about <strong>organzing</strong> our measurements into some type of collection.  In our previous chapter on the <a class="reference internal" href="../03/00-python.html"><span class="doc std std-doc">basics of Python</span></a> we discussed the concept of <a class="reference external" href="chapters/03/00-python.html#collections">collections</a>.  Collections are things in the native Python language space that organize multiple numbers, string, or even other collections.  This included <a class="reference external" href="chapters/03/00-python.html#lists">lists</a> (which organize things in some order), <a class="reference external" href="chapters/03/00-python.html#dictionaries">dictionaries</a> (which do not preseve order but allow “looking up” the value of a number by a special address known as a key), or <a class="reference external" href="chapters/03/00-python.html#sets">sets</a> (which are unordered collections of things useful for counting, and performing set operations like union, etc…).</p>
<p>For instance if we measured a number repeatedly in time a list might be a useful way to organize them:</p>
<div style="text-align: center">
    <img src="./images/list.png" width="400">
</div><p>Lets imagine the numbers above represent some measurement on a person on three different days (monday, tuesday, wednesday).  It might be their blood pressure or temperature.  Learning a lot about one person is nice and fits cleanly into a list.  However, more often it gets more complex.  What we if instead have multiple people we are recording information from and so the data starts looking two dimensional.  There is maybe 3 people in the study and each has 3 measurements.  In that case we might then organize the data as a list of lists (or a matrix):</p>
<div style="text-align: center">
    <img src="./images/matrix.png" width="550">
</div><p>Although a matrix is a nice way to organize multiple observations made on multiple people it can get a little bit confusing.  Are the rows or the columns the subjects in the example above?  You have to remember to write that down otherwise you could easily get confused.  What is this data?  What does it describe? For this reason we might look beyond standard Python collections to more complex structures.</p>
<p>For example, you are all likely familiar with the concept of a spreadsheet (e.g., Microsoft Excel or Google Sheets).  These are nicer than matricies because they have named rows and columns and so just by looking at the structure of the spreadsheet you can often learn more about the structure of the data.  Columns names are sometimes known as <strong>metadata</strong> because they are data themselves that <em>describe</em> other data.</p>
<div style="text-align: center">
    <img src="./images/spreadsheet.png" width="550">
</div>
<p>This is much nicer because the columns names help us remember what each measurement records and also what is contained in the rows.</p>
<p>The two dimensional structure of a spreadsheet is generally the most complex types of data that we will deal with.  However, just so you are aware, as data gets really big it can make sense to take other organizational approaches.  For instance, a website that had millions of users reviewing movies might not want to make a long spreadsheet recording each user and the rating they gave and the movie the rating was about.  Stop and think for a moment how you could do that in a spreadsheet.  Perhaps you could make each row a user and each column a movie.  However, as you know Netflix and other sites have hundred of thousands of TV shows and movies and so the data would be really unweildy.  Also most of the data would be “missing” because people only provide a rating for a small subset of the total number of movies.  As a result, big websites adopt alternative ways of organizating data including the use of what are known as <strong>relational databases</strong>.</p>
<div style="text-align: center">
    <img src="./images/database.png" width="550">
</div><p>Relational databases are made up of multiple spreadsheets (effectively) where each one represents only a smaller piece of the data.  In the figure above the green words are columns of a smaller spreadsheet. This database is thus organized into four separate spreadsheets (or “tables”). For instance the ratings table has an unique id number (i.e. row number) and then the rating a person gave, a user id of who gave it, and a movie id for which movie it was about.  Separately there is a movies table which had its own id (unique id for each movie), the title or name of the movie, and a description/summary of the movie.  The orange lines reflect links where the value in one columns of one table connects with or refers to the entries of another one.  This can be a much more efficient way to organize the data.</p>
<p>The main point this example brings forward is that the way you organize your data is something you really have to think about and plan to begin with.  I’ve found that this topic actually is intuitively interesting to many students.  The reason is that we love organizing our homes and offices.  It feels great.  When it comes to data taking the same mentality - the “fresh” feeling of being organized, is really key to making good scientific analyses that do not have bugs.  Problems with data organization can even be deadly (<a class="reference external" href="https://foreignpolicy.com/2020/10/08/uk-coronavirus-covid-spreadsheet-excel-error-outsourcing/">How not to kill people with spreadsheets</a>).  If you get really interested in organizing data, there are <a class="reference external" href="https://www.amazon.com/Discipline-Organizing-MIT-Press/dp/0262518503">entire books</a> <span id="id1">[<a class="reference internal" href="#id65">Glushko, 2013</a>]</span> and fields of study about how to best organize data (e.g., library and information sciences).  The choices you make in how to organize your data at one point in time really influence how easy it can be to do certain analyses later.  More on this later.</p>
</div>
<div class="section" id="common-file-formats-for-data">
<h2><span class="section-number">6.3. </span>Common file formats for data<a class="headerlink" href="#common-file-formats-for-data" title="Permalink to this headline">¶</a></h2>
<p>Data often come in files with particular formatted structure.  This formatted structure makes it easier for computer programs to read in the data and manipulate it.  In this section we will go over a couple of the common data formats you might encounter in traditional psychological research.</p>
<div class="section" id="excel-workbooks-xls-xslx-files">
<h3><span class="section-number">6.3.1. </span>Excel Workbooks (.xls, .xslx files)<a class="headerlink" href="#excel-workbooks-xls-xslx-files" title="Permalink to this headline">¶</a></h3>
<p>XLSX file format (or XLS in older versions of Excel) is the default file format used in Excel. Under the hood, Excel Workbooks are built using a highly structured markup language called Extensible Markup Language (XML). Essentially what this means is while you are using Excel’s graphic interface to edit your data, XML is adding a bunch of tags behind the scenes to the XLSX file so it knows how to properly format the data each time you open it up. All of these tags in XML are what allow you to change font colors and sizes, add graphs and images, and use formulas.</p>
<p>This is what you see when you when you use Excel:</p>
<div style="text-align: center">
    <img src="./images/excel_worksheet.png" width="200">
</div>
<p>And this is what the exact same Workbook looks like behind the scenes:</p>
<div style="text-align: center">
    <img src="./images/excel_xml.png" width="550">
</div>
<p>But this complexity can also make it difficult to use XLSX files with any other software or programming language that isn’t Excel. For one, not all programs can open XLSX files, so these data files can make your data inaccessible to other people. Two, all of this special formatting can sometimes lead to problems when you read in data from XLSX files (e.g., converting variables to weird formats). To avoid issues like these, it is preferable to store your data using plain-text formats (such as CSV and TSV files).</p>
</div>
<div class="section" id="comma-separated-values-csv-files">
<h3><span class="section-number">6.3.2. </span>Comma-separated Values (.csv files)<a class="headerlink" href="#comma-separated-values-csv-files" title="Permalink to this headline">¶</a></h3>
<p>CSV, or Comma-separated value files, on the other hand, are written using a plain-text format. No special tags, just text. The only formatting in CSV files are the commas used to delimit different values for columns and new lines to indicate rows. You can see this if you open up a CSV file using Notepad (or other text editors).</p>
<p>Here’s the same dataset as before but now as a CSV file:</p>
<div style="text-align: center">
    <img src="./images/csv_sample.png" width="450">
</div>
<p>This means that what you can store within a CSV file is quite limited (no images or special formatting, for example). But it also means that this kind of file is great for storing and sharing data. CSV files can be opened by any software, making it accessible to others. Given that CSV files inherently have no formatting, some of the issues that come with using XLSX files never arise.</p>
</div>
<div class="section" id="tab-separated-values-tsv-files">
<h3><span class="section-number">6.3.3. </span>Tab-separated Values (.tsv files)<a class="headerlink" href="#tab-separated-values-tsv-files" title="Permalink to this headline">¶</a></h3>
<p>TSV files are very similar to CSV files, except that instead of using a comma to delimit between values in a dataset, it uses tabs (a special type of spacing, the same type you get when you hit the tab key on your computer).</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>It is a little bit beyond the scope of our class, but another file format you might encounter is referred to as JSON which stands for Javascript Object Notation (JSON).  JSON is similar to a python dictionary and is stored in a plain text file like a CSV.  However, JSON is somewhat more flexible than the two-dimensional structure of a spreadsheet. Often one analysis step is to convert JSON into a 2D spreadsheet-type structure.  <a class="reference external" href="https://realpython.com/python-json/">Here</a> is a helpful guide to JSON in python.</p>
</div>
</div>
</div>
<div class="section" id="exporting-from-spreadsheet-programs">
<h2><span class="section-number">6.4. </span>Exporting from spreadsheet programs<a class="headerlink" href="#exporting-from-spreadsheet-programs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="google-sheets">
<h3><span class="section-number">6.4.1. </span>Google Sheets<a class="headerlink" href="#google-sheets" title="Permalink to this headline">¶</a></h3>
<p>To export a .csv file from Google Sheets, you click on File &gt; Download &gt; Comma-separated values (.csv).</p>
<div style="text-align: center"><img src="./images/export_csv_google.png" width="450"></div>
<p>If you created a Google Sheet with multiple sheets, you will have to save each individual sheet as a .csv file because .csv files do not support multiple sheets. To do this, you will have to click on each sheet and go through the save process for each sheet.</p>
</div>
<div class="section" id="excel">
<h3><span class="section-number">6.4.2. </span>Excel<a class="headerlink" href="#excel" title="Permalink to this headline">¶</a></h3>
<p>To create a .csv file from Excel, click on File (found on the top left of the menu bar).</p>
<div style="text-align: center"><img src="./images/excel_header.png" width="250"></div>
<p>A new menu will appear. From there, select “Save as” and then choose where on your computer you want to save the file. A pop-up window will open up, and from there, you can choose what to name the file and what kind of file type to save it as. To save it as a   will there will be a dropdown menu where you can select which kind of file type you would like to save the file as (labeled “Save as type”).</p>
<div style="text-align: center"><img src="./images/export_csv_excel.png" width="550"></div></div>
</div>
<div class="section" id="uploading-csv-files-to-jupyterhub">
<h2><span class="section-number">6.5. </span>Uploading csv files to JupyterHub<a class="headerlink" href="#uploading-csv-files-to-jupyterhub" title="Permalink to this headline">¶</a></h2>
<p>Many of the datasets you will be working with this semester will already be available for you to use on JupyterHub. However, if you want to work with your own datasets, you will need to upload them yourselves to the cluster.</p>
<p>To do that, go to the “Files” tab on JupyterHub and use the “Upload” button.</p>
<div style="text-align: center"><img src="./images/jupyter_upload.png" width="450"></div></div>
<div class="section" id="the-pandas-library-and-the-concept-of-a-dataframe-api">
<h2><span class="section-number">6.6. </span>The Pandas library and the concept of a dataframe API<a class="headerlink" href="#the-pandas-library-and-the-concept-of-a-dataframe-api" title="Permalink to this headline">¶</a></h2>
<div style="text-align: center">
    <img src="./images/pandaslogo.png" width="250">
</div>
<p>Throughout this class there are several libraries (i.e., tools which extend the capabilities of the core Python language) which we will use a lot.  One of those is <a class="reference external" href="https://pandas.pydata.org">Pandas</a>.  Pandas is a open-source project for Python that provides a data analysis and manipulation tool.  Pandas gives you a way to interact with a dataset organized like a spreadsheet (meaning columns and rows which are possibly named or labeled with meta data) in order to perform sophisticated data analyses.  Pandas is really the “backbone” of the Python data science and modeling environment.  Pandas could be thought of as a langauge (or <a class="reference external" href="https://en.wikipedia.org/wiki/API">API</a>) for unlocking tabular data.  <strong>If you want to become better at data analysis with Python there is no single package I can think of that is worth more of your time learning.</strong></p>
<p>Although there is no required book for this class, “<a class="reference external" href="https://www.amazon.com/Learning-Pandas-Library-Munging-Analysis/dp/153359824X">Learning the Pandas Library: Python Tools for Data Munging, Analysis and Visualization</a>” by Matt Harrison <span id="id2">[<a class="reference internal" href="#id67">Harrison, 2016</a>]</span> is highly recommended both because it is short and to the point but also because it explains key Pandas concepts very clearly.  In addition, the Pandas project includes a very helpful <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/index.html">user guide</a> which explains many of the key concepts.</p>
<div class="tip admonition">
<p class="admonition-title">Pandas can be confusing at first!</p>
<p>I was aware of Pandas for several years and never really “understood it.”  However, when it clicked it opened a universe of data analysis to me.  It takes some patience in part because data manipulation is a very complex topic at least at the conceptual level.</p>
</div>
<p>The organization of this guide is not to give a complete description of everything in Pandas but to kind of give you a sense of how you use Pandas (with code) to do the types of tasks you typically would do in a spreadsheet like Excel or Google Sheets.  In addition, we show a few of the key features of Pandas that are not that easy to do in Excel which are very useful for behavioral data analysis.</p>
<p>The first step of understanding Pandas is to load it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
</div>
</div>
<p>The two code lines above are the typical way to load in the Pandas library.  <a class="reference external" href="https://numpy.org">Numpy</a> is a related library that Pandas is built on top of (it really is like a Russian doll where one project enables the next!).  Tradionally, pandas is imported ‘as’ <strong>pd</strong> and numpy ‘as’ <strong>np</strong>.  This means that when you are reading code online if you see <code class="docutils literal notranslate"><span class="pre">pd.somefunction()</span></code> you can probably assume that the function is part of the pandas library because the function begins with the <code class="docutils literal notranslate"><span class="pre">pd.</span></code> syntax.</p>
</div>
<div class="section" id="reading-data-e-g-csvs-into-python-using-pandas">
<h2><span class="section-number">6.7. </span>Reading data (e.g., csvs) into Python using Pandas<a class="headerlink" href="#reading-data-e-g-csvs-into-python-using-pandas" title="Permalink to this headline">¶</a></h2>
<p>Before getting further with Pandas it helps to first understand how to read some data into a dataframe object or how to create a dataframe from scratch.  Usually you are reading data in from some other file (e.g., a CSV file) and “loading” it into Pandas.  Pandas has <a href="https://pandas.pydata.org/pandas-docs/stable/reference/io.html">many different ways</a> for reading in different file types. Here, we will use <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html"><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code></a> because we will mostly be working with .csv files in this class.</p>
<p>When reading in your .csv file, there are two things you absolutely have to do:</p>
<p>First, <strong>you need to store the data into a variable.</strong> Otherwise, you won’t be able to work with your data. Here, we called the dataframe “df” but you can name it whatever you want.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># incorrect: won&#39;t store your data</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;salary.csv&#39;</span><span class="p">)</span>

<span class="c1"># correct: creates a dataframe called df that you can work with </span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;salary.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Second, <strong>you need to tell <code class="docutils literal notranslate"><span class="pre">pd.read_csv</span></code> where the file you are trying to import is located.</strong> The path can point to a file located in a folder in your local enviroment (e.g., on your computer, on JupyterHub) or to a file available online.</p>
<p>To point to a file available online, you’ll put the link to the file.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;http://gureckislab.org/courses/fall19/labincp/data/salary.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>If you are pointing to a file on JupyterHub (or to a file on your computer, if you had Python downloaded on your computer), you’ll need to specify the path to the file. If the .csv file and your notebook are in the same folder, you only have to put the name of the file.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;salary.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>If the file is located in a different folder than the notebook you are working with, you will have to specify which folder(s) that the computer needs to look at to find it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;folder1/folder2/salary.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Sometimes, your .csv file might be saved in a folder that’s not in the same folder as your notebook. For example, say you have a folder called “project”. And in that the folder, there was a folder called “code” that contained your notebooks/python code, as well as a folder called “data” that contained your data (.csv) files. To import your .csv file, you need to use <code class="docutils literal notranslate"><span class="pre">..</span></code> to tell the your computer go up one folder in your directory (get out of the “code” folder) in order for it to find the “data” folder.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../data/salary.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>By default, <code class="docutils literal notranslate"><span class="pre">pd.read_csv</span></code> assumes that file uses commas to differentiate between different entries in the file. But you can also explicitly tell <code class="docutils literal notranslate"><span class="pre">pd.read_csv</span></code> that you want to use commas as the delimiter.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;salary.csv&#39;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pd.read_csv</span></code> also assumes by default that the first row in your .csv files lists the names for each column of data (the column headers). You can explicitly tell <code class="docutils literal notranslate"><span class="pre">pd.read_csv</span></code> to do this by writing:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;salary.csv&#39;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="s1">&#39;infer&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Sometimes, datasets may have multiple headers. (e.g., both the first and second rows of the dataset list column names). <code class="docutils literal notranslate"><span class="pre">pd.read_csv</span></code> allows you to keep both rows as headers by modifying the <code class="docutils literal notranslate"><span class="pre">header</span></code> argument with a list of integers. Remember that 0 actually means the first row.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;salary.csv&#39;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>When creating your own datasets, it’s generally best practice to give your columns headers, so that’s it easier for people looking at your data (including yourself!) to know what’s in the dataset. However, you may occassionally come across datasets that do not have headers. To tell <code class="docutils literal notranslate"><span class="pre">pd.read_csv</span></code> there’s no header to import, set <code class="docutils literal notranslate"><span class="pre">header</span></code> to “None”:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;salary.csv&#39;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>:::{warning}
When creating your own dataset, refrain from using characters like space or period (.) in the column names.  This will make things easier for you down the line when using Pandas for statistical modeling.
:::</p>
</div>
<div class="section" id="viewing-the-data-in-a-dataframe">
<h2><span class="section-number">6.8. </span>Viewing the data in a dataframe<a class="headerlink" href="#viewing-the-data-in-a-dataframe" title="Permalink to this headline">¶</a></h2>
<p>So now we have loaded a dataset into a variable called <code class="docutils literal notranslate"><span class="pre">df</span></code>.  Now we might like to look at the data to check it was properly read in and also to learn more about the structure of this dataset.  Perhaps the simplest method is simply to type the name of the dataframe variable by itself in a code cell:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;http://gureckislab.org/courses/fall19/labincp/data/salary.csv&#39;</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>86285</td>
      <td>0</td>
      <td>bio</td>
      <td>26.0</td>
      <td>64.0</td>
      <td>72</td>
    </tr>
    <tr>
      <th>1</th>
      <td>77125</td>
      <td>0</td>
      <td>bio</td>
      <td>28.0</td>
      <td>58.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>2</th>
      <td>71922</td>
      <td>0</td>
      <td>bio</td>
      <td>10.0</td>
      <td>38.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70499</td>
      <td>0</td>
      <td>bio</td>
      <td>16.0</td>
      <td>46.0</td>
      <td>64</td>
    </tr>
    <tr>
      <th>4</th>
      <td>66624</td>
      <td>0</td>
      <td>bio</td>
      <td>11.0</td>
      <td>41.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>72</th>
      <td>53662</td>
      <td>1</td>
      <td>neuro</td>
      <td>1.0</td>
      <td>31.0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>73</th>
      <td>57185</td>
      <td>1</td>
      <td>stat</td>
      <td>9.0</td>
      <td>39.0</td>
      <td>7</td>
    </tr>
    <tr>
      <th>74</th>
      <td>52254</td>
      <td>1</td>
      <td>stat</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>75</th>
      <td>61885</td>
      <td>1</td>
      <td>math</td>
      <td>23.0</td>
      <td>60.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>76</th>
      <td>49542</td>
      <td>1</td>
      <td>math</td>
      <td>3.0</td>
      <td>33.0</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
<p>77 rows × 6 columns</p>
</div></div></div>
</div>
<p>This outputs a “table” view of the dataframe showing the column names, and several of the rows of the dataset.  It doesn’t show you <strong>all</strong> of the data at once because in many large files this would be too much to make sense of.</p>
<p>You can also specifically request the first several rows of the dataframe:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>86285</td>
      <td>0</td>
      <td>bio</td>
      <td>26.0</td>
      <td>64.0</td>
      <td>72</td>
    </tr>
    <tr>
      <th>1</th>
      <td>77125</td>
      <td>0</td>
      <td>bio</td>
      <td>28.0</td>
      <td>58.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>2</th>
      <td>71922</td>
      <td>0</td>
      <td>bio</td>
      <td>10.0</td>
      <td>38.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70499</td>
      <td>0</td>
      <td>bio</td>
      <td>16.0</td>
      <td>46.0</td>
      <td>64</td>
    </tr>
    <tr>
      <th>4</th>
      <td>66624</td>
      <td>0</td>
      <td>bio</td>
      <td>11.0</td>
      <td>41.0</td>
      <td>23</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>or the last several rows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>72</th>
      <td>53662</td>
      <td>1</td>
      <td>neuro</td>
      <td>1.0</td>
      <td>31.0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>73</th>
      <td>57185</td>
      <td>1</td>
      <td>stat</td>
      <td>9.0</td>
      <td>39.0</td>
      <td>7</td>
    </tr>
    <tr>
      <th>74</th>
      <td>52254</td>
      <td>1</td>
      <td>stat</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>75</th>
      <td>61885</td>
      <td>1</td>
      <td>math</td>
      <td>23.0</td>
      <td>60.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>76</th>
      <td>49542</td>
      <td>1</td>
      <td>math</td>
      <td>3.0</td>
      <td>33.0</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The “head” of the dataframe is the top.  The “tail” of the dataframe is the bottom.</p>
<p>We can also access individual rows and columns of a data frame.</p>
<div class="section" id="accessing-individual-columns">
<h3><span class="section-number">6.8.1. </span>Accessing individual columns<a class="headerlink" href="#accessing-individual-columns" title="Permalink to this headline">¶</a></h3>
<p>To access a single column you can index it like a dictionary in Python using the column name as a key:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;salary&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0     86285
1     77125
2     71922
3     70499
4     66624
      ...  
72    53662
73    57185
74    52254
75    61885
76    49542
Name: salary, Length: 77, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0     64.0
1     58.0
2     38.0
3     46.0
4     41.0
      ... 
72    31.0
73    39.0
74    32.0
75    60.0
76    33.0
Name: age, Length: 77, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Another allowed syntax is to use the name of the dataframe variable and a <code class="docutils literal notranslate"><span class="pre">.columnname</span></code>.  For instance:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">salary</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0     86285
1     77125
2     71922
3     70499
4     66624
      ...  
72    53662
73    57185
74    52254
75    61885
76    49542
Name: salary, Length: 77, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>However the dictionary key-lookup method is preferred because it is possible that the name of a column is the same as a dataframe method (see below) and that causes Python to get confused.</p>
<p>:::{seealso}
When we learn about <a class="reference internal" href="../06/00-plots.html"><span class="doc std std-doc">visualizing data</span></a>, <a class="reference internal" href="../07/00-describingdata.html"><span class="doc std std-doc">describing data</span></a>, and <a class="reference internal" href="../13/00-linearregression.html"><span class="doc std std-doc">linear regression</span></a> you will see how the column struture of dataframes becomes very powerful.
:::</p>
</div>
<div class="section" id="accessing-individal-rows">
<h3><span class="section-number">6.8.2. </span>Accessing individal rows<a class="headerlink" href="#accessing-individal-rows" title="Permalink to this headline">¶</a></h3>
<p>Since the Python bracket notation is use to lookup columns, a special command is needed to access rows.  The best way to look up a single row is to use <code class="docutils literal notranslate"><span class="pre">.iloc[]</span></code> where you pass the integer row number you want to access (zero indexed).  So to get the first row you type:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>salary          86285
gender              0
departm           bio
years              26
age                64
publications       72
Name: 0, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Here is the 5th row:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>salary          66624
gender              0
departm           bio
years              11
age                41
publications       23
Name: 4, dtype: object
</pre></div>
</div>
</div>
</div>
<p>or counting three backwards from the end:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>salary          52254
gender              1
departm          stat
years               2
age                32
publications        9
Name: 74, dtype: object
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="indexes-and-columns">
<h3><span class="section-number">6.8.3. </span>Indexes and Columns<a class="headerlink" href="#indexes-and-columns" title="Permalink to this headline">¶</a></h3>
<p>Also note that there are two special elements of a normal dataframe called the <strong>column index</strong> and the <strong>row index</strong> (or just index).  The row index is the column on the left that has no name but seems like a counter of the rows (e.g., 72, 73, 74, …).  The row index is useful in Pandas dataframes for looking things up by row.  Although you can index a row by counting (access the fifth row for instance), the index can be made on arbitrary types of data including strings, etc…  You don’t need to know a ton about indexes to use Pandas typically but every once in a while they come up so it is useful to know the special nature of the index column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">index</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>RangeIndex(start=0, stop=77, step=1)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;salary&#39;, &#39;gender&#39;, &#39;departm&#39;, &#39;years&#39;, &#39;age&#39;, &#39;publications&#39;], dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<p>The above code shows how to find the row index and column index.</p>
<p>You can change the row index to another column:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;departm&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
    <tr>
      <th>departm</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>bio</th>
      <td>86285</td>
      <td>0</td>
      <td>26.0</td>
      <td>64.0</td>
      <td>72</td>
    </tr>
    <tr>
      <th>bio</th>
      <td>77125</td>
      <td>0</td>
      <td>28.0</td>
      <td>58.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>bio</th>
      <td>71922</td>
      <td>0</td>
      <td>10.0</td>
      <td>38.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>bio</th>
      <td>70499</td>
      <td>0</td>
      <td>16.0</td>
      <td>46.0</td>
      <td>64</td>
    </tr>
    <tr>
      <th>bio</th>
      <td>66624</td>
      <td>0</td>
      <td>11.0</td>
      <td>41.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>neuro</th>
      <td>53662</td>
      <td>1</td>
      <td>1.0</td>
      <td>31.0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>stat</th>
      <td>57185</td>
      <td>1</td>
      <td>9.0</td>
      <td>39.0</td>
      <td>7</td>
    </tr>
    <tr>
      <th>stat</th>
      <td>52254</td>
      <td>1</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>math</th>
      <td>61885</td>
      <td>1</td>
      <td>23.0</td>
      <td>60.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>math</th>
      <td>49542</td>
      <td>1</td>
      <td>3.0</td>
      <td>33.0</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
<p>77 rows × 5 columns</p>
</div></div></div>
</div>
<p>Or to reset it to a counter that count the row number use <code class="docutils literal notranslate"><span class="pre">.reset_index()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df2</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;departm&#39;</span><span class="p">)</span>
<span class="n">df2</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>departm</th>
      <th>salary</th>
      <th>gender</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>bio</td>
      <td>86285</td>
      <td>0</td>
      <td>26.0</td>
      <td>64.0</td>
      <td>72</td>
    </tr>
    <tr>
      <th>1</th>
      <td>bio</td>
      <td>77125</td>
      <td>0</td>
      <td>28.0</td>
      <td>58.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>2</th>
      <td>bio</td>
      <td>71922</td>
      <td>0</td>
      <td>10.0</td>
      <td>38.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>3</th>
      <td>bio</td>
      <td>70499</td>
      <td>0</td>
      <td>16.0</td>
      <td>46.0</td>
      <td>64</td>
    </tr>
    <tr>
      <th>4</th>
      <td>bio</td>
      <td>66624</td>
      <td>0</td>
      <td>11.0</td>
      <td>41.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>72</th>
      <td>neuro</td>
      <td>53662</td>
      <td>1</td>
      <td>1.0</td>
      <td>31.0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>73</th>
      <td>stat</td>
      <td>57185</td>
      <td>1</td>
      <td>9.0</td>
      <td>39.0</td>
      <td>7</td>
    </tr>
    <tr>
      <th>74</th>
      <td>stat</td>
      <td>52254</td>
      <td>1</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>75</th>
      <td>math</td>
      <td>61885</td>
      <td>1</td>
      <td>23.0</td>
      <td>60.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>76</th>
      <td>math</td>
      <td>49542</td>
      <td>1</td>
      <td>3.0</td>
      <td>33.0</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
<p>77 rows × 6 columns</p>
</div></div></div>
</div>
<p>Note the syntax we’ve used a few times here… we referenced the <code class="docutils literal notranslate"><span class="pre">df</span></code> variable which is the variable we created to store the data from our file.  Then the <code class="docutils literal notranslate"><span class="pre">.functionname()</span></code> is known as a method of the data frame which is provided by pandas.  For instance the <code class="docutils literal notranslate"><span class="pre">.head()</span></code> method prints out the first five rows of the data frame.  The <code class="docutils literal notranslate"><span class="pre">.tail()</span></code> method prints out the last five rows of the data frame.  There are many other methods available on data frames that you access by calling it using the <code class="docutils literal notranslate"><span class="pre">.functionname()</span></code> syntax.  The next parts of this chapter explain some of the most common ones.</p>
</div>
</div>
<div class="section" id="adding-and-deleting-things-from-a-dataframe">
<h2><span class="section-number">6.9. </span>Adding and deleting things from a dataframe<a class="headerlink" href="#adding-and-deleting-things-from-a-dataframe" title="Permalink to this headline">¶</a></h2>
<p>Sometimes after we read in a dataset we might want to add new rows or columns or delete rows and columns from a dataframe.  One way to do this is to edit the original CSV file that we read in.  However, there is an important principle I want to emphasize thoughout this class:</p>
<div class="tip admonition">
<p class="admonition-title"><strong>ALWAYS do everything in code</strong></p>
<p>What do I mean by do everything in code?  What I mean is that if you go to your data file that you got from some place and then by hand delete some of the data in Google Sheets or Excel, noone will know that you did that.  There is no record of it.  Once you save the file the data will be deleted and noone will know you did this.  Instead if you keep your data as “raw” as possible and modify it using code, your code will document ALL of the steps you did in your analysis including the step of deleting data.  “Excluding” (not DELETEing) data is sometimes justified but the important thing is we want to document all our steps honestly and truthfully when doing analysis.  Using code to do every single step of an analysis helps us accomplish this.</p>
</div>
<div class="section" id="deleting-rows">
<h3><span class="section-number">6.9.1. </span>Deleting rows<a class="headerlink" href="#deleting-rows" title="Permalink to this headline">¶</a></h3>
<p>To delete a row you can use the <code class="docutils literal notranslate"><span class="pre">.drop()</span></code> method to drop a particular item using its index value.  The <code class="docutils literal notranslate"><span class="pre">.drop()</span></code> method is not an “in place operation” instead it returns a new dataframe with the particular rows removed.</p>
<div class="tip admonition">
<p class="admonition-title"><strong>“In place” operations</strong></p>
<p>From time to time using pandas you will here about a method being described as “in place” or “not in place.”  In place means that the change you are making to the dataframe is made to the dataframe variable you describe.  So for instance if you have a dataframe stored in a variable named <code class="docutils literal notranslate"><span class="pre">df</span></code> and you call <code class="docutils literal notranslate"><span class="pre">df.drop([1])</span></code> it will drop the row corresponding to the index value 1.  However, if you look at <code class="docutils literal notranslate"><span class="pre">df</span></code> again using, for instance, <code class="docutils literal notranslate"><span class="pre">df.head()</span></code> you will see that it will not have changed.  To save the changes with a “not in place” operation you need to store the results in a new variable.  For insteance <code class="docutils literal notranslate"><span class="pre">df2</span> <span class="pre">=</span> <span class="pre">df.drop([1])</span></code> will make a copy of <code class="docutils literal notranslate"><span class="pre">df</span></code>, drop the row corresponding to index 1 and then store the result in <code class="docutils literal notranslate"><span class="pre">df2</span></code>.  If drop was an “in place” operation it would have actually modified <code class="docutils literal notranslate"><span class="pre">df</span></code> and so you wouldn’t need to store the result in a new variable.</p>
</div>
<p>Here is how to use it.  Suppose we have the salary dataframe from above:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>86285</td>
      <td>0</td>
      <td>bio</td>
      <td>26.0</td>
      <td>64.0</td>
      <td>72</td>
    </tr>
    <tr>
      <th>1</th>
      <td>77125</td>
      <td>0</td>
      <td>bio</td>
      <td>28.0</td>
      <td>58.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>2</th>
      <td>71922</td>
      <td>0</td>
      <td>bio</td>
      <td>10.0</td>
      <td>38.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70499</td>
      <td>0</td>
      <td>bio</td>
      <td>16.0</td>
      <td>46.0</td>
      <td>64</td>
    </tr>
    <tr>
      <th>4</th>
      <td>66624</td>
      <td>0</td>
      <td>bio</td>
      <td>11.0</td>
      <td>41.0</td>
      <td>23</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>If we want to delete the first we can drop it using the index it has, in this case 0:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df2</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="mi">0</span><span class="p">])</span>
<span class="n">df2</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>77125</td>
      <td>0</td>
      <td>bio</td>
      <td>28.0</td>
      <td>58.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>2</th>
      <td>71922</td>
      <td>0</td>
      <td>bio</td>
      <td>10.0</td>
      <td>38.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70499</td>
      <td>0</td>
      <td>bio</td>
      <td>16.0</td>
      <td>46.0</td>
      <td>64</td>
    </tr>
    <tr>
      <th>4</th>
      <td>66624</td>
      <td>0</td>
      <td>bio</td>
      <td>11.0</td>
      <td>41.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>5</th>
      <td>64451</td>
      <td>0</td>
      <td>bio</td>
      <td>23.0</td>
      <td>60.0</td>
      <td>44</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Notice how I “saved” the modified dataframe into a new variable called <code class="docutils literal notranslate"><span class="pre">df2</span></code> using the equals sign.  Then if we call the <code class="docutils literal notranslate"><span class="pre">.head()</span></code> method on <code class="docutils literal notranslate"><span class="pre">df2</span></code> we can see that the first row has been removed.  <code class="docutils literal notranslate"><span class="pre">df</span></code>, the original dataframe variable, remains unchanged.</p>
<p>You can also remove multiple rows by their index value at once:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>77125</td>
      <td>0</td>
      <td>bio</td>
      <td>28.0</td>
      <td>58.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70499</td>
      <td>0</td>
      <td>bio</td>
      <td>16.0</td>
      <td>46.0</td>
      <td>64</td>
    </tr>
    <tr>
      <th>5</th>
      <td>64451</td>
      <td>0</td>
      <td>bio</td>
      <td>23.0</td>
      <td>60.0</td>
      <td>44</td>
    </tr>
    <tr>
      <th>7</th>
      <td>59344</td>
      <td>0</td>
      <td>bio</td>
      <td>5.0</td>
      <td>40.0</td>
      <td>11</td>
    </tr>
    <tr>
      <th>8</th>
      <td>58560</td>
      <td>0</td>
      <td>bio</td>
      <td>8.0</td>
      <td>38.0</td>
      <td>8</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Here I dropped the rows with index 0,2,4,6, and also show an example of <strong>chaining</strong> dataframe methods.</p>
<div class="tip admonition">
<p class="admonition-title"><strong>Chaining methods</strong></p>
<p>Dataframes in pandas a what is known as an object-oriented structure.  This means that most the functionality of a dataframe is tied to the variables themselves.  That is why in the previous examples we called <code class="docutils literal notranslate"><span class="pre">df.method()</span></code> like <code class="docutils literal notranslate"><span class="pre">df.drop()</span></code> instead of <code class="docutils literal notranslate"><span class="pre">pd.drop()</span></code> (calling from the base pandas library). Given this, most pandas methods either return themselves or a copy of the dataframe that has been altered.  Thus you can “chain” operations and methods together to make the code more concise.  Chaining means calling multiple methods in a row on a single line of code.  <code class="docutils literal notranslate"><span class="pre">df.drop([0,2,4,6]).head()</span></code> calls the <code class="docutils literal notranslate"><span class="pre">drop()</span></code> method on the dataframe and then called the <code class="docutils literal notranslate"><span class="pre">head()</span></code> method on the resulting modified data frame.  This means you don’t have to store every intermediate step of your data manipulation into a new variable.</p>
</div>
</div>
<div class="section" id="deleting-columns">
<h3><span class="section-number">6.9.2. </span>Deleting columns<a class="headerlink" href="#deleting-columns" title="Permalink to this headline">¶</a></h3>
<p>To delete a column instead of a row you can also use the <code class="docutils literal notranslate"><span class="pre">.drop()</span></code> method, using an additional argument that refers to the “axis” you are dropping from.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>86285</td>
      <td>0</td>
      <td>bio</td>
      <td>26.0</td>
      <td>64.0</td>
      <td>72</td>
    </tr>
    <tr>
      <th>1</th>
      <td>77125</td>
      <td>0</td>
      <td>bio</td>
      <td>28.0</td>
      <td>58.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>2</th>
      <td>71922</td>
      <td>0</td>
      <td>bio</td>
      <td>10.0</td>
      <td>38.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70499</td>
      <td>0</td>
      <td>bio</td>
      <td>16.0</td>
      <td>46.0</td>
      <td>64</td>
    </tr>
    <tr>
      <th>4</th>
      <td>66624</td>
      <td>0</td>
      <td>bio</td>
      <td>11.0</td>
      <td>41.0</td>
      <td>23</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Here are a couple examples of dropping one or more columns by name.  Note that the case of the column name must match and also you need to specific <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> to refer to dropping columns instead of rows.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;years&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>86285</td>
      <td>0</td>
      <td>bio</td>
      <td>64.0</td>
      <td>72</td>
    </tr>
    <tr>
      <th>1</th>
      <td>77125</td>
      <td>0</td>
      <td>bio</td>
      <td>58.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>2</th>
      <td>71922</td>
      <td>0</td>
      <td>bio</td>
      <td>38.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70499</td>
      <td>0</td>
      <td>bio</td>
      <td>46.0</td>
      <td>64</td>
    </tr>
    <tr>
      <th>4</th>
      <td>66624</td>
      <td>0</td>
      <td>bio</td>
      <td>41.0</td>
      <td>23</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;years&#39;</span><span class="p">,</span><span class="s1">&#39;age&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>86285</td>
      <td>0</td>
      <td>bio</td>
      <td>72</td>
    </tr>
    <tr>
      <th>1</th>
      <td>77125</td>
      <td>0</td>
      <td>bio</td>
      <td>43</td>
    </tr>
    <tr>
      <th>2</th>
      <td>71922</td>
      <td>0</td>
      <td>bio</td>
      <td>23</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70499</td>
      <td>0</td>
      <td>bio</td>
      <td>64</td>
    </tr>
    <tr>
      <th>4</th>
      <td>66624</td>
      <td>0</td>
      <td>bio</td>
      <td>23</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="adding-rows">
<h3><span class="section-number">6.9.3. </span>Adding rows<a class="headerlink" href="#adding-rows" title="Permalink to this headline">¶</a></h3>
<p>Using pandas it is best to resist the urge to add rows one at a time to a dataframe.  For various reasons is this not the ideal way to use pandas <a class="footnote-reference brackets" href="#columnbased" id="id3">1</a>.  Instead you can combine the rows of two different dataframes into one.  This might be useful in psychology for instance if each participant in your experiment had their own data file and you want to read each file into a dataframe and them combine them together to make one “uber” dataframe with all the data from your experiment.</p>
<p>Here’s two simple dataframes and we can combine them:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">27</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">21</span><span class="p">],</span> <span class="s2">&quot;salary&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">23000</span><span class="p">,</span><span class="mi">100000</span><span class="p">,</span><span class="mi">35000</span><span class="p">,</span><span class="mi">60000</span><span class="p">]})</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">53</span><span class="p">,</span><span class="mi">56</span><span class="p">,</span><span class="mi">80</span><span class="p">],</span> <span class="s2">&quot;salary&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">50000</span><span class="p">,</span><span class="mi">23000</span><span class="p">,</span><span class="mi">60000</span><span class="p">,</span><span class="mi">135000</span><span class="p">,</span><span class="mi">0</span><span class="p">]})</span>

<span class="n">df_combined</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df1</span><span class="p">,</span><span class="n">df2</span><span class="p">])</span>

<span class="n">df_combined</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>salary</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>27</td>
      <td>23000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>45</td>
      <td>100000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23</td>
      <td>35000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>21</td>
      <td>60000</td>
    </tr>
    <tr>
      <th>0</th>
      <td>60</td>
      <td>50000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>70</td>
      <td>23000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>53</td>
      <td>60000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>56</td>
      <td>135000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>80</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>This only works because they have the same columns.  If they have different columns then the missing entries of either are filled in with <code class="docutils literal notranslate"><span class="pre">NaN</span></code> which is the code for “missing values” in pandas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">27</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">21</span><span class="p">],</span> <span class="s2">&quot;salary&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">23000</span><span class="p">,</span><span class="mi">100000</span><span class="p">,</span><span class="mi">35000</span><span class="p">,</span><span class="mi">60000</span><span class="p">]})</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">53</span><span class="p">,</span><span class="mi">56</span><span class="p">,</span><span class="mi">80</span><span class="p">],</span> <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">5.2</span><span class="p">,</span><span class="mf">6.0</span><span class="p">,</span><span class="mf">5.7</span><span class="p">,</span><span class="mf">3.4</span><span class="p">,</span><span class="mf">4.6</span><span class="p">]})</span>

<span class="n">df_combined</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df1</span><span class="p">,</span><span class="n">df2</span><span class="p">])</span>

<span class="n">df_combined</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>salary</th>
      <th>height</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10</td>
      <td>0.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>27</td>
      <td>23000.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>45</td>
      <td>100000.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23</td>
      <td>35000.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>21</td>
      <td>60000.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>0</th>
      <td>60</td>
      <td>NaN</td>
      <td>5.2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>70</td>
      <td>NaN</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>53</td>
      <td>NaN</td>
      <td>5.7</td>
    </tr>
    <tr>
      <th>3</th>
      <td>56</td>
      <td>NaN</td>
      <td>3.4</td>
    </tr>
    <tr>
      <th>4</th>
      <td>80</td>
      <td>NaN</td>
      <td>4.6</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We will talk about dealing with “missing” values shortly but basically missing values in pandas allows for incomplete rows: you might have have information about every single field of a row and so you can uses <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (stands for Not-a-number in computer speak) to represent missing values.</p>
</div>
<div class="section" id="adding-columns">
<h3><span class="section-number">6.9.4. </span>Adding columns<a class="headerlink" href="#adding-columns" title="Permalink to this headline">¶</a></h3>
<p>As we have considered adding rows, now let’s consider adding columns.  This is actually pretty easy.  You just assign some values to a new columns name.  First we will create a data frame with two random columns:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;col_1&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s2">&quot;col_2&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">)})</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>col_1</th>
      <th>col_2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.016417</td>
      <td>0.555351</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.323619</td>
      <td>0.868004</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.744349</td>
      <td>0.767006</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.023376</td>
      <td>0.915717</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.431546</td>
      <td>0.761252</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.668849</td>
      <td>0.522965</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.199476</td>
      <td>0.161559</td>
    </tr>
    <tr>
      <th>7</th>
      <td>0.071968</td>
      <td>0.866112</td>
    </tr>
    <tr>
      <th>8</th>
      <td>0.452259</td>
      <td>0.650265</td>
    </tr>
    <tr>
      <th>9</th>
      <td>0.449017</td>
      <td>0.797710</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Now we simply assign a new column <code class="docutils literal notranslate"><span class="pre">df[\'sum\']</span></code> and define it to be the sum of two columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;sum&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;col_1&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col_2&#39;</span><span class="p">]</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>col_1</th>
      <th>col_2</th>
      <th>sum</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.016417</td>
      <td>0.555351</td>
      <td>0.571768</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.323619</td>
      <td>0.868004</td>
      <td>1.191623</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.744349</td>
      <td>0.767006</td>
      <td>1.511355</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.023376</td>
      <td>0.915717</td>
      <td>0.939093</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.431546</td>
      <td>0.761252</td>
      <td>1.192798</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.668849</td>
      <td>0.522965</td>
      <td>1.191814</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.199476</td>
      <td>0.161559</td>
      <td>0.361035</td>
    </tr>
    <tr>
      <th>7</th>
      <td>0.071968</td>
      <td>0.866112</td>
      <td>0.938080</td>
    </tr>
    <tr>
      <th>8</th>
      <td>0.452259</td>
      <td>0.650265</td>
      <td>1.102524</td>
    </tr>
    <tr>
      <th>9</th>
      <td>0.449017</td>
      <td>0.797710</td>
      <td>1.246726</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>You can also define new columns to be a constant value:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;constant&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>col_1</th>
      <th>col_2</th>
      <th>sum</th>
      <th>constant</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.189631</td>
      <td>0.014450</td>
      <td>0.204081</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.455379</td>
      <td>0.781008</td>
      <td>1.236386</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.879715</td>
      <td>0.426790</td>
      <td>1.306504</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.942081</td>
      <td>0.905498</td>
      <td>1.847578</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.189411</td>
      <td>0.631864</td>
      <td>0.821275</td>
      <td>2</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.813499</td>
      <td>0.069108</td>
      <td>0.882607</td>
      <td>2</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.884211</td>
      <td>0.467572</td>
      <td>1.351783</td>
      <td>2</td>
    </tr>
    <tr>
      <th>7</th>
      <td>0.232354</td>
      <td>0.593110</td>
      <td>0.825464</td>
      <td>2</td>
    </tr>
    <tr>
      <th>8</th>
      <td>0.762218</td>
      <td>0.176046</td>
      <td>0.938265</td>
      <td>2</td>
    </tr>
    <tr>
      <th>9</th>
      <td>0.872711</td>
      <td>0.053765</td>
      <td>0.926476</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>There are of course some limitations and technicalities here but for the most part you just name a new column and define it as above.</p>
</div>
<div class="section" id="deleting-rows-with-missing-data">
<h3><span class="section-number">6.9.5. </span>Deleting rows with missing data<a class="headerlink" href="#deleting-rows-with-missing-data" title="Permalink to this headline">¶</a></h3>
<p>Since we are talking about adding and removing rows and columns it can also make sense to discuss removing rows with missing data.   You might want to for example drop any trial from an experiment where a subject didn’t give a response before a timer deadline.  In this case the column coding what the response was might be “empty” or “missing” and you would want to use the <code class="docutils literal notranslate"><span class="pre">NaN</span></code> value to indicate it was missing.  To totally delete rows with any missing value use the <code class="docutils literal notranslate"><span class="pre">dropna()</span></code> function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">27</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">21</span><span class="p">],</span> <span class="s2">&quot;salary&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">23000</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="mi">35000</span><span class="p">,</span><span class="mi">60000</span><span class="p">]})</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>salary</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>27</td>
      <td>23000.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>45</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23</td>
      <td>35000.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>21</td>
      <td>60000.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>As you can see the salary value is missing for row with index 2 (age 45).  To drop any row with a missing value:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>salary</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>27</td>
      <td>23000.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23</td>
      <td>35000.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>21</td>
      <td>60000.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>There are several other tricks for dropping missing data besides this.  For example, you can delete rows with only a specific column value missing, etc…  However for now this should work for us.</p>
</div>
<div class="section" id="getting-individual-values-and-changing-them">
<h3><span class="section-number">6.9.6. </span>Getting individual values and changing them<a class="headerlink" href="#getting-individual-values-and-changing-them" title="Permalink to this headline">¶</a></h3>
<p>Sometimes you want to just extract a single value or row from a dataframe or change a single value.  The <code class="docutils literal notranslate"><span class="pre">.iat</span></code> method lets you pull out a single value from the data frame given the position of the index and column.  The <code class="docutils literal notranslate"><span class="pre">.iat</span></code> method is one of the very weird parts of Pandas which has no real good explanation.  Instead of the parentheses used to call normal methods, <code class="docutils literal notranslate"><span class="pre">.iat</span></code> and a few others use square brackets.  One way to think about it is that <code class="docutils literal notranslate"><span class="pre">.iat</span></code> is like looking something up in a normal Python array but it also seems like a method attached to the dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;http://gureckislab.org/courses/fall19/labincp/data/salary.csv&#39;</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>86285</td>
      <td>0</td>
      <td>bio</td>
      <td>26.0</td>
      <td>64.0</td>
      <td>72</td>
    </tr>
    <tr>
      <th>1</th>
      <td>77125</td>
      <td>0</td>
      <td>bio</td>
      <td>28.0</td>
      <td>58.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>2</th>
      <td>71922</td>
      <td>0</td>
      <td>bio</td>
      <td>10.0</td>
      <td>38.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70499</td>
      <td>0</td>
      <td>bio</td>
      <td>16.0</td>
      <td>46.0</td>
      <td>64</td>
    </tr>
    <tr>
      <th>4</th>
      <td>66624</td>
      <td>0</td>
      <td>bio</td>
      <td>11.0</td>
      <td>41.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>72</th>
      <td>53662</td>
      <td>1</td>
      <td>neuro</td>
      <td>1.0</td>
      <td>31.0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>73</th>
      <td>57185</td>
      <td>1</td>
      <td>stat</td>
      <td>9.0</td>
      <td>39.0</td>
      <td>7</td>
    </tr>
    <tr>
      <th>74</th>
      <td>52254</td>
      <td>1</td>
      <td>stat</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>75</th>
      <td>61885</td>
      <td>1</td>
      <td>math</td>
      <td>23.0</td>
      <td>60.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>76</th>
      <td>49542</td>
      <td>1</td>
      <td>math</td>
      <td>3.0</td>
      <td>33.0</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
<p>77 rows × 6 columns</p>
</div></div></div>
</div>
<p>This gets the value at row 0 column 0 which is the salary of the first person in the data frame.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>86285
</pre></div>
</div>
</div>
</div>
<p>This gets the age of the person in the sixth row, fourth column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>53.0
</pre></div>
</div>
</div>
</div>
<p>A slighly more reader-friendly option is to use <code class="docutils literal notranslate"><span class="pre">.at[]</span></code> which is a method that lets you look things up using the names of columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>40.0
</pre></div>
</div>
</div>
</div>
<p>You can also use this to <strong>change</strong> the value of a particular cell.</p>
<p>First we see that the person in the first row has age 64.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>86285</td>
      <td>0</td>
      <td>bio</td>
      <td>26.0</td>
      <td>64.0</td>
      <td>72</td>
    </tr>
    <tr>
      <th>1</th>
      <td>77125</td>
      <td>0</td>
      <td>bio</td>
      <td>28.0</td>
      <td>58.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>2</th>
      <td>71922</td>
      <td>0</td>
      <td>bio</td>
      <td>10.0</td>
      <td>38.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70499</td>
      <td>0</td>
      <td>bio</td>
      <td>16.0</td>
      <td>46.0</td>
      <td>64</td>
    </tr>
    <tr>
      <th>4</th>
      <td>66624</td>
      <td>0</td>
      <td>bio</td>
      <td>11.0</td>
      <td>41.0</td>
      <td>23</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">.at[]</span></code> we set it to 100.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;age&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">100</span>
</pre></div>
</div>
</div>
</div>
<p>Then when we look at the result the age has been changed in the dataframe <code class="docutils literal notranslate"><span class="pre">df</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>86285</td>
      <td>0</td>
      <td>bio</td>
      <td>26.0</td>
      <td>100.0</td>
      <td>72</td>
    </tr>
    <tr>
      <th>1</th>
      <td>77125</td>
      <td>0</td>
      <td>bio</td>
      <td>28.0</td>
      <td>58.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>2</th>
      <td>71922</td>
      <td>0</td>
      <td>bio</td>
      <td>10.0</td>
      <td>38.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70499</td>
      <td>0</td>
      <td>bio</td>
      <td>16.0</td>
      <td>46.0</td>
      <td>64</td>
    </tr>
    <tr>
      <th>4</th>
      <td>66624</td>
      <td>0</td>
      <td>bio</td>
      <td>11.0</td>
      <td>41.0</td>
      <td>23</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The way to remember this is that methods that look things up use square brackets.  And if the method begins with an i (like <code class="docutils literal notranslate"><span class="pre">.iat[]</span></code>) it will look it up by integer index (i.e., the number of the column or row).  Otherwise <code class="docutils literal notranslate"><span class="pre">.at[]</span></code> looks up by row (or a named index) and column name.</p>
</div>
<div class="section" id="checking-the-size-dimensions-of-your-data">
<h3><span class="section-number">6.9.7. </span>Checking the size/dimensions of your data<a class="headerlink" href="#checking-the-size-dimensions-of-your-data" title="Permalink to this headline">¶</a></h3>
<p>One common thing you need to do is to verify the number of rows and columns in your dataframe.  The <code class="docutils literal notranslate"><span class="pre">.shape</span></code> property can help with that.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;http://gureckislab.org/courses/fall19/labincp/data/salary.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(77, 6)
</pre></div>
</div>
</div>
</div>
<p>This tells us that the dataframe contained in variable <code class="docutils literal notranslate"><span class="pre">df</span></code> has 77 rows and 6 columns.  This is often helpful when you first read in a dataset to verify it has all the data you expected to be there!</p>
<div class="tip admonition">
<p class="admonition-title"><strong>Methods versus properties</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">.shape</span></code> property doesn’t include a final <code class="docutils literal notranslate"><span class="pre">()</span></code> unlike other methods we have learned about like <code class="docutils literal notranslate"><span class="pre">.drop()</span></code> which required parentheses.  This reflects that size is known as a property of the dataframe while <code class="docutils literal notranslate"><span class="pre">.drop()</span></code> is a method.  The conceptual differences can be confusing for why one is one way or the other.  However, it is helpful to often think about them as the distinction between nouns and verbs in langauge.  Properties (nouns) are static descriptors of a dataset such as the size of the dataset or the column names.  In contrast, methods (verbs) are things that require computation or modification of the dataframe like deleting things or performing computations on columns or rows.</p>
</div>
<p>Ultimately the step we just covered recreate much of what you do with the graphical user interface in Excel (change cell values, add/delete rows and columns, etc…).  The real power of Pandas comes from more complex things you can do with dataframes.  That is what we will explore in the next section.</p>
</div>
</div>
<div class="section" id="things-you-can-do-with-dataframes">
<h2><span class="section-number">6.10. </span>Things you can do with dataframes<a class="headerlink" href="#things-you-can-do-with-dataframes" title="Permalink to this headline">¶</a></h2>
<p>The main goal of getting your data into a dataframe is that enables several methods for manipulating your data in powerful ways.</p>
<div class="section" id="sorting">
<h3><span class="section-number">6.10.1. </span>Sorting<a class="headerlink" href="#sorting" title="Permalink to this headline">¶</a></h3>
<p>Often times it can help us understand a dataset better if we can sort the rows of the dataset according to the values in one or more columns.  For instance in the salary data set we have been considering it is hard to know who is the highest and lowest paid faculty.  One approach would to be sort the values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;http://gureckislab.org/courses/fall19/labincp/data/salary.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>86285</td>
      <td>0</td>
      <td>bio</td>
      <td>26.0</td>
      <td>64.0</td>
      <td>72</td>
    </tr>
    <tr>
      <th>1</th>
      <td>77125</td>
      <td>0</td>
      <td>bio</td>
      <td>28.0</td>
      <td>58.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>2</th>
      <td>71922</td>
      <td>0</td>
      <td>bio</td>
      <td>10.0</td>
      <td>38.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70499</td>
      <td>0</td>
      <td>bio</td>
      <td>16.0</td>
      <td>46.0</td>
      <td>64</td>
    </tr>
    <tr>
      <th>4</th>
      <td>66624</td>
      <td>0</td>
      <td>bio</td>
      <td>11.0</td>
      <td>41.0</td>
      <td>23</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can sort this dataset in ascending order with:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;salary&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>23</th>
      <td>44687</td>
      <td>0</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>19</td>
    </tr>
    <tr>
      <th>22</th>
      <td>47021</td>
      <td>0</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>12</td>
    </tr>
    <tr>
      <th>76</th>
      <td>49542</td>
      <td>1</td>
      <td>math</td>
      <td>3.0</td>
      <td>33.0</td>
      <td>5</td>
    </tr>
    <tr>
      <th>53</th>
      <td>51391</td>
      <td>0</td>
      <td>stat</td>
      <td>5.0</td>
      <td>35.0</td>
      <td>8</td>
    </tr>
    <tr>
      <th>74</th>
      <td>52254</td>
      <td>1</td>
      <td>stat</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>14</th>
      <td>97630</td>
      <td>0</td>
      <td>chem</td>
      <td>34.0</td>
      <td>64.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>24</th>
      <td>104828</td>
      <td>0</td>
      <td>geol</td>
      <td>NaN</td>
      <td>50.0</td>
      <td>44</td>
    </tr>
    <tr>
      <th>29</th>
      <td>105761</td>
      <td>0</td>
      <td>neuro</td>
      <td>9.0</td>
      <td>39.0</td>
      <td>30</td>
    </tr>
    <tr>
      <th>41</th>
      <td>106412</td>
      <td>0</td>
      <td>stat</td>
      <td>23.0</td>
      <td>53.0</td>
      <td>29</td>
    </tr>
    <tr>
      <th>28</th>
      <td>112800</td>
      <td>0</td>
      <td>neuro</td>
      <td>14.0</td>
      <td>44.0</td>
      <td>33</td>
    </tr>
  </tbody>
</table>
<p>77 rows × 6 columns</p>
</div></div></div>
</div>
<p>Now we can easily see from this output at 44,687 is the lowest salary and 112,800 is the highest.  <code class="docutils literal notranslate"><span class="pre">sort_values()</span></code> is <strong>not</strong> an inplace operation so the original dataframe is still unsorted and we have to store the sorted result in a new dataframe variable if we want to keep working with it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>  <span class="c1"># still unsorted</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>86285</td>
      <td>0</td>
      <td>bio</td>
      <td>26.0</td>
      <td>64.0</td>
      <td>72</td>
    </tr>
    <tr>
      <th>1</th>
      <td>77125</td>
      <td>0</td>
      <td>bio</td>
      <td>28.0</td>
      <td>58.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>2</th>
      <td>71922</td>
      <td>0</td>
      <td>bio</td>
      <td>10.0</td>
      <td>38.0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70499</td>
      <td>0</td>
      <td>bio</td>
      <td>16.0</td>
      <td>46.0</td>
      <td>64</td>
    </tr>
    <tr>
      <th>4</th>
      <td>66624</td>
      <td>0</td>
      <td>bio</td>
      <td>11.0</td>
      <td>41.0</td>
      <td>23</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can sort the other way by adding an additional parameter:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;salary&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>28</th>
      <td>112800</td>
      <td>0</td>
      <td>neuro</td>
      <td>14.0</td>
      <td>44.0</td>
      <td>33</td>
    </tr>
    <tr>
      <th>41</th>
      <td>106412</td>
      <td>0</td>
      <td>stat</td>
      <td>23.0</td>
      <td>53.0</td>
      <td>29</td>
    </tr>
    <tr>
      <th>29</th>
      <td>105761</td>
      <td>0</td>
      <td>neuro</td>
      <td>9.0</td>
      <td>39.0</td>
      <td>30</td>
    </tr>
    <tr>
      <th>24</th>
      <td>104828</td>
      <td>0</td>
      <td>geol</td>
      <td>NaN</td>
      <td>50.0</td>
      <td>44</td>
    </tr>
    <tr>
      <th>14</th>
      <td>97630</td>
      <td>0</td>
      <td>chem</td>
      <td>34.0</td>
      <td>64.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>74</th>
      <td>52254</td>
      <td>1</td>
      <td>stat</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>53</th>
      <td>51391</td>
      <td>0</td>
      <td>stat</td>
      <td>5.0</td>
      <td>35.0</td>
      <td>8</td>
    </tr>
    <tr>
      <th>76</th>
      <td>49542</td>
      <td>1</td>
      <td>math</td>
      <td>3.0</td>
      <td>33.0</td>
      <td>5</td>
    </tr>
    <tr>
      <th>22</th>
      <td>47021</td>
      <td>0</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>12</td>
    </tr>
    <tr>
      <th>23</th>
      <td>44687</td>
      <td>0</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>19</td>
    </tr>
  </tbody>
</table>
<p>77 rows × 6 columns</p>
</div></div></div>
</div>
<p>And if you sort by two columns it will do them in order (so the first listed column is sorted first then the second):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;salary&#39;</span><span class="p">,</span><span class="s1">&#39;age&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>23</th>
      <td>44687</td>
      <td>0</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>19</td>
    </tr>
    <tr>
      <th>22</th>
      <td>47021</td>
      <td>0</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>12</td>
    </tr>
    <tr>
      <th>76</th>
      <td>49542</td>
      <td>1</td>
      <td>math</td>
      <td>3.0</td>
      <td>33.0</td>
      <td>5</td>
    </tr>
    <tr>
      <th>53</th>
      <td>51391</td>
      <td>0</td>
      <td>stat</td>
      <td>5.0</td>
      <td>35.0</td>
      <td>8</td>
    </tr>
    <tr>
      <th>74</th>
      <td>52254</td>
      <td>1</td>
      <td>stat</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>14</th>
      <td>97630</td>
      <td>0</td>
      <td>chem</td>
      <td>34.0</td>
      <td>64.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>24</th>
      <td>104828</td>
      <td>0</td>
      <td>geol</td>
      <td>NaN</td>
      <td>50.0</td>
      <td>44</td>
    </tr>
    <tr>
      <th>29</th>
      <td>105761</td>
      <td>0</td>
      <td>neuro</td>
      <td>9.0</td>
      <td>39.0</td>
      <td>30</td>
    </tr>
    <tr>
      <th>41</th>
      <td>106412</td>
      <td>0</td>
      <td>stat</td>
      <td>23.0</td>
      <td>53.0</td>
      <td>29</td>
    </tr>
    <tr>
      <th>28</th>
      <td>112800</td>
      <td>0</td>
      <td>neuro</td>
      <td>14.0</td>
      <td>44.0</td>
      <td>33</td>
    </tr>
  </tbody>
</table>
<p>77 rows × 6 columns</p>
</div></div></div>
</div>
<p>In this data set it is mostly the same to sort by salary first then age because most people don’t have the same salary so that already provides an order.  However if we do it the other way, i.e., age first then salary, it will order by people age and then for the people who are the same age sort by salary.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="s1">&#39;salary&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>72</th>
      <td>53662</td>
      <td>1</td>
      <td>neuro</td>
      <td>1.0</td>
      <td>31.0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>74</th>
      <td>52254</td>
      <td>1</td>
      <td>stat</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>52</th>
      <td>53656</td>
      <td>0</td>
      <td>stat</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>4</td>
    </tr>
    <tr>
      <th>56</th>
      <td>72044</td>
      <td>0</td>
      <td>physics</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>16</td>
    </tr>
    <tr>
      <th>76</th>
      <td>49542</td>
      <td>1</td>
      <td>math</td>
      <td>3.0</td>
      <td>33.0</td>
      <td>5</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>15</th>
      <td>82444</td>
      <td>0</td>
      <td>chem</td>
      <td>31.0</td>
      <td>61.0</td>
      <td>42</td>
    </tr>
    <tr>
      <th>0</th>
      <td>86285</td>
      <td>0</td>
      <td>bio</td>
      <td>26.0</td>
      <td>64.0</td>
      <td>72</td>
    </tr>
    <tr>
      <th>14</th>
      <td>97630</td>
      <td>0</td>
      <td>chem</td>
      <td>34.0</td>
      <td>64.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>16</th>
      <td>76291</td>
      <td>0</td>
      <td>chem</td>
      <td>29.0</td>
      <td>65.0</td>
      <td>33</td>
    </tr>
    <tr>
      <th>18</th>
      <td>64762</td>
      <td>0</td>
      <td>chem</td>
      <td>25.0</td>
      <td>NaN</td>
      <td>29</td>
    </tr>
  </tbody>
</table>
<p>77 rows × 6 columns</p>
</div></div></div>
</div>
<p>As you can see in this shortened output there are several people who are 32 in the database and their salaries are ordered from smallest to biggest.</p>
<p>Sorting is easy to do in Pandas but also easy to do in Excel because there is a “sort” tool in such programs.</p>
</div>
<div class="section" id="arithmetic">
<h3><span class="section-number">6.10.2. </span>Arithmetic<a class="headerlink" href="#arithmetic" title="Permalink to this headline">¶</a></h3>
<p>Perhaps one of the most useful features of dataframes (and spreadsheets) is the ability to create formulas that compute new values based on the rows and columns.  For instance if you had a dataframe that had rows for students and each column was the grade on an assignment a common operation might be to compute the average grade as a new column.  Let’s take a look at a simple example of this and then discuss arithmetic operations in Pandas more generally.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grades_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;student&#39;</span><span class="p">:[</span><span class="s1">&#39;001&#39;</span><span class="p">,</span><span class="s1">&#39;002&#39;</span><span class="p">,</span><span class="s1">&#39;003&#39;</span><span class="p">],</span> <span class="s1">&#39;assignment1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">90</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">70</span><span class="p">],</span> <span class="s1">&#39;assignment2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">82</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">96</span><span class="p">],</span> <span class="s1">&#39;assignment3&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">89</span><span class="p">,</span><span class="mi">75</span><span class="p">,</span><span class="mi">89</span><span class="p">]})</span>
<span class="n">grades_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>student</th>
      <th>assignment1</th>
      <th>assignment2</th>
      <th>assignment3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>001</td>
      <td>90</td>
      <td>82</td>
      <td>89</td>
    </tr>
    <tr>
      <th>1</th>
      <td>002</td>
      <td>80</td>
      <td>84</td>
      <td>75</td>
    </tr>
    <tr>
      <th>2</th>
      <td>003</td>
      <td>70</td>
      <td>96</td>
      <td>89</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>This is not necessarily the easier way to <strong>enter</strong> this data (you might prefer to use a spreadsheet for that), but you could read in a csv to load the grades for instance.  Next you would want to create the average grade for each student.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grades_df</span><span class="p">[</span><span class="s1">&#39;average&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">grades_df</span><span class="p">[</span><span class="s1">&#39;assignment1&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">grades_df</span><span class="p">[</span><span class="s1">&#39;assignment2&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">grades_df</span><span class="p">[</span><span class="s1">&#39;assignment3&#39;</span><span class="p">])</span><span class="o">/</span><span class="mi">3</span>
<span class="n">grades_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>student</th>
      <th>assignment1</th>
      <th>assignment2</th>
      <th>assignment3</th>
      <th>average</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>001</td>
      <td>90</td>
      <td>82</td>
      <td>89</td>
      <td>87.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>002</td>
      <td>80</td>
      <td>84</td>
      <td>75</td>
      <td>79.666667</td>
    </tr>
    <tr>
      <th>2</th>
      <td>003</td>
      <td>70</td>
      <td>96</td>
      <td>89</td>
      <td>85.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>So you can see here we added up the column for assignment 1, 2, and 3 and then divided by three.  Then we assigned that resulting value to a new column called average.  You might wonder how did Pandas know to do this for all three students?  The answer is the power of <strong>broadcasting</strong> a feature of many programming languages that automatically detects when you are doing arithmetic operations on collections of numbers and then does that operation for <strong>each entry</strong> rather than like the first one.</p>
<p>We can also broadcast the addition of constant values to a column.  For instance to give all the students a five point bonus we could do this”</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grades_df</span><span class="p">[</span><span class="s1">&#39;average&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">grades_df</span><span class="p">[</span><span class="s1">&#39;average&#39;</span><span class="p">]</span><span class="o">+</span><span class="mi">5</span>
<span class="n">grades_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>student</th>
      <th>assignment1</th>
      <th>assignment2</th>
      <th>assignment3</th>
      <th>average</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>001</td>
      <td>90</td>
      <td>82</td>
      <td>89</td>
      <td>92.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>002</td>
      <td>80</td>
      <td>84</td>
      <td>75</td>
      <td>84.666667</td>
    </tr>
    <tr>
      <th>2</th>
      <td>003</td>
      <td>70</td>
      <td>96</td>
      <td>89</td>
      <td>90.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Again, here it added 5 to <em>each entry</em> of the grades column rather than just one or the first row.</p>
<p>Basically any math function can be composed of the columns.  You might also be interested in functions you could compute down the columns rather than across them, however we will consider those in more detail in the later chapter on <a class="reference internal" href="../07/00-describingdata.html"><span class="doc std std-doc">Describing Data</span></a>.</p>
</div>
<div class="section" id="slicing">
<h3><span class="section-number">6.10.3. </span>Slicing<a class="headerlink" href="#slicing" title="Permalink to this headline">¶</a></h3>
<p>A very useful and common feature for manipulating data is slicing.  Slicing refers to selecting out subsets of a dataset for further analysis.  For example we might want to plot only the salaries of the women in this data set.  To do this we want to “slice” out a subset of the data and analyze that further.  We saw slicing before in a previous chapter on Python programming with strings and lists where you can “slice” pieces of a collection out.  Pandas takes this several steps further making it more functional for data composed of multiple rows and columns.</p>
<p>If you remember we can slice a piece of a list by specifying the starting element and the ending element and including the <code class="docutils literal notranslate"><span class="pre">:</span></code> operator to indicate that we want the values “in between”:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">,</span><span class="s1">&#39;f&#39;</span><span class="p">,</span><span class="s1">&#39;g&#39;</span><span class="p">]</span>
<span class="n">a_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;b&#39;, &#39;c&#39;, &#39;d&#39;]
</pre></div>
</div>
</div>
</div>
<p>We can do the same thing using the <code class="docutils literal notranslate"><span class="pre">.iloc[]</span></code> method on a data frame.  However since a Pandas dataframe is two dimensional we can specify two slide ranges one for the rows and one for the columns. <code class="docutils literal notranslate"><span class="pre">iloc[]</span></code> is simialr to <code class="docutils literal notranslate"><span class="pre">iat[]</span></code> we say above in that it is used via square brackets (because it is a lookup indexing operation) and the <code class="docutils literal notranslate"><span class="pre">i</span></code> part refer to that we are providing the integer location of the rows and columns (i.e., using numbers to say which row and columns we want).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>71922</td>
      <td>0</td>
      <td>bio</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70499</td>
      <td>0</td>
      <td>bio</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>That example takes row 2 and 3 and columns 0,1,2 (remember Python is zero indexed so the first row or column is numbered zero).</p>
<p>We can also slice using column names using just <code class="docutils literal notranslate"><span class="pre">loc[]</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="s2">&quot;gender&quot;</span><span class="p">:]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>bio</td>
      <td>28.0</td>
      <td>58.0</td>
      <td>43</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>bio</td>
      <td>10.0</td>
      <td>38.0</td>
      <td>23</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Similar to <code class="docutils literal notranslate"><span class="pre">.iat[]</span></code> and <code class="docutils literal notranslate"><span class="pre">.at[]</span></code>, <code class="docutils literal notranslate"><span class="pre">iloc[]</span></code> uses integer lookup and <code class="docutils literal notranslate"><span class="pre">loc[]</span></code> uses index names.  You might wonder why I still used numbers for the rows in the above.  This is because this dataframe still has an <strong>index</strong> for the rows which is integer based.  However, indexes are an important part of Dataframes.</p>
</div>
<div class="section" id="selecting">
<h3><span class="section-number">6.10.4. </span>Selecting<a class="headerlink" href="#selecting" title="Permalink to this headline">¶</a></h3>
<p>Related to slicing is “selecting” which is grabbing subsets of a dataframe’s rows based on the <strong>values</strong> of some of the rows.  This is different than slicing which takes little chunks out of a larger dataframe using indexes or column names.  Here we are interested in selecting rows that meet a particular criterion.  For instance in the professor salary dataset we read in we might want to select only the rows that represent women in the dataset.  Let’s look at an example of how to do that and then discuss the principle.</p>
<p>First we need to discuss the concept of logical operations which are broadcast along the columns.  For instance if we write something like</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">50</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0      True
1      True
2     False
3     False
4     False
      ...  
72    False
73    False
74    False
75     True
76    False
Name: age, Length: 77, dtype: bool
</pre></div>
</div>
</div>
</div>
<p>We get a column of <code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code> values (also known as Boolean values since they take on two values) which reflect a test for each row if the age value is greater than 50.  If it is, then <code class="docutils literal notranslate"><span class="pre">True</span></code> is entered into the new column and if it isn’t then <code class="docutils literal notranslate"><span class="pre">False</span></code> is entered in.</p>
<p>We can write more complex logical operations as well.  For instance:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">50</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">70</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0      True
1      True
2     False
3     False
4     False
      ...  
72    False
73    False
74    False
75     True
76    False
Name: age, Length: 77, dtype: bool
</pre></div>
</div>
</div>
</div>
<p>This expression does a logical <code class="docutils literal notranslate"><span class="pre">and</span></code> due to the <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> symbol and will be true if the age is greater than 50 AND less than 70.</p>
<p>The examples so far used a single row but we can also make combination using multiple columns.  For instance we could select all the rows corresponding to professors that are male and under 50.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">50</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0     False
1     False
2     False
3     False
4     False
      ...  
72     True
73     True
74     True
75    False
76     True
Length: 77, dtype: bool
</pre></div>
</div>
</div>
</div>
<p>If you want to make an “or” you use the ‘|’ (pipe) character instead of the ‘&amp;’.</p>
<p>Now that we have this boolean column we can use it to select subsets of the original dataframe:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">35</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>22</th>
      <td>47021</td>
      <td>0</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>12</td>
    </tr>
    <tr>
      <th>23</th>
      <td>44687</td>
      <td>0</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>19</td>
    </tr>
    <tr>
      <th>52</th>
      <td>53656</td>
      <td>0</td>
      <td>stat</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>4</td>
    </tr>
    <tr>
      <th>56</th>
      <td>72044</td>
      <td>0</td>
      <td>physics</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>16</td>
    </tr>
    <tr>
      <th>70</th>
      <td>55949</td>
      <td>1</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>12</td>
    </tr>
    <tr>
      <th>72</th>
      <td>53662</td>
      <td>1</td>
      <td>neuro</td>
      <td>1.0</td>
      <td>31.0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>74</th>
      <td>52254</td>
      <td>1</td>
      <td>stat</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>76</th>
      <td>49542</td>
      <td>1</td>
      <td>math</td>
      <td>3.0</td>
      <td>33.0</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The previous line selects all the professors under 35.  Notice the syntax here as it is kind of sensible.  On the outer part we have <code class="docutils literal notranslate"><span class="pre">df[]</span></code> and in the middle of the bracket we provide the logical column/series as we just discussed.  You can break them into two steps if you like:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">under35</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">35</span>
<span class="n">df</span><span class="p">[</span><span class="n">under35</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>22</th>
      <td>47021</td>
      <td>0</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>12</td>
    </tr>
    <tr>
      <th>23</th>
      <td>44687</td>
      <td>0</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>19</td>
    </tr>
    <tr>
      <th>52</th>
      <td>53656</td>
      <td>0</td>
      <td>stat</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>4</td>
    </tr>
    <tr>
      <th>56</th>
      <td>72044</td>
      <td>0</td>
      <td>physics</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>16</td>
    </tr>
    <tr>
      <th>70</th>
      <td>55949</td>
      <td>1</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>12</td>
    </tr>
    <tr>
      <th>72</th>
      <td>53662</td>
      <td>1</td>
      <td>neuro</td>
      <td>1.0</td>
      <td>31.0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>74</th>
      <td>52254</td>
      <td>1</td>
      <td>stat</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>76</th>
      <td>49542</td>
      <td>1</td>
      <td>math</td>
      <td>3.0</td>
      <td>33.0</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>This makes clear that we define the “rule” for what things are true and false in this column (<code class="docutils literal notranslate"><span class="pre">under35</span></code>) and then use it to select rows from the original dataframe.</p>
<p>You use this a lot in data analysis because often a data file from a single subject in an experiment has trials you want to skip or analyze, or you might use it to select trials from particular subjects, or trials that meet a certain requirement (E.g., if a reaction time was too long or something).  Thus it is important to bookmark this concept and we will return to it several times throughout the semester.</p>
<p>An event simpler synatx for this is provided by the <code class="docutils literal notranslate"><span class="pre">.query()</span></code> method on Pandas data frames.  For example, using this command this is how you would select all the professors under age 35 in the the salary dataset:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;age&lt;35&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>22</th>
      <td>47021</td>
      <td>0</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>12</td>
    </tr>
    <tr>
      <th>23</th>
      <td>44687</td>
      <td>0</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>19</td>
    </tr>
    <tr>
      <th>52</th>
      <td>53656</td>
      <td>0</td>
      <td>stat</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>4</td>
    </tr>
    <tr>
      <th>56</th>
      <td>72044</td>
      <td>0</td>
      <td>physics</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>16</td>
    </tr>
    <tr>
      <th>70</th>
      <td>55949</td>
      <td>1</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>12</td>
    </tr>
    <tr>
      <th>72</th>
      <td>53662</td>
      <td>1</td>
      <td>neuro</td>
      <td>1.0</td>
      <td>31.0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>74</th>
      <td>52254</td>
      <td>1</td>
      <td>stat</td>
      <td>2.0</td>
      <td>32.0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>76</th>
      <td>49542</td>
      <td>1</td>
      <td>math</td>
      <td>3.0</td>
      <td>33.0</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>This is nice because it does the same thing as the above without all the extra brackets which sometimes contribute to typos.  Here is a slightly more complex version using the logical and operator:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;age&lt;35 &amp; departm==&#39;chem&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>22</th>
      <td>47021</td>
      <td>0</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>12</td>
    </tr>
    <tr>
      <th>23</th>
      <td>44687</td>
      <td>0</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>19</td>
    </tr>
    <tr>
      <th>70</th>
      <td>55949</td>
      <td>1</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>12</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;age&lt;35 &amp; departm==&#39;chem&#39; &amp; publications == 12&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>gender</th>
      <th>departm</th>
      <th>years</th>
      <th>age</th>
      <th>publications</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>22</th>
      <td>47021</td>
      <td>0</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>12</td>
    </tr>
    <tr>
      <th>70</th>
      <td>55949</td>
      <td>1</td>
      <td>chem</td>
      <td>4.0</td>
      <td>34.0</td>
      <td>12</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>So nice!</p>
</div>
<div class="section" id="iteration">
<h3><span class="section-number">6.10.5. </span>Iteration<a class="headerlink" href="#iteration" title="Permalink to this headline">¶</a></h3>
<p>Iteration refers to stepping through either the rows of the columns of your dataframe one by one and doing some thing with each row or column.  We have encountered iteration before when we learned about Python for loops.  If you remember, the typical for loop we had we iterated over a list.  For example this code iterates down a list of values and prints each one.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
1
2
3
4
5
6
7
8
9
</pre></div>
</div>
</div>
</div>
<p>We can iterate over both rows and columns of a dataframe since the format is two dimensional.  This prints out the titles of each column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">df</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">column</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>salary
gender
departm
years
age
publications
</pre></div>
</div>
</div>
</div>
<p>The above method only gets you the individual column name.  To get the data within each column, you use a special methods called <code class="docutils literal notranslate"><span class="pre">.iteritems()</span></code>.  For example:</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">columnname</span><span class="p">,</span> <span class="n">columndata</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">columnname</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">columndata</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>salary
---
0     86285
1     77125
2     71922
3     70499
4     66624
      ...  
72    53662
73    57185
74    52254
75    61885
76    49542
Name: salary, Length: 77, dtype: int64
gender
---
0     0
1     0
2     0
3     0
4     0
     ..
72    1
73    1
74    1
75    1
76    1
Name: gender, Length: 77, dtype: int64
departm
---
0       bio
1       bio
2       bio
3       bio
4       bio
      ...  
72    neuro
73     stat
74     stat
75     math
76     math
Name: departm, Length: 77, dtype: object
years
---
0     26.0
1     28.0
2     10.0
3     16.0
4     11.0
      ... 
72     1.0
73     9.0
74     2.0
75    23.0
76     3.0
Name: years, Length: 77, dtype: float64
age
---
0     64.0
1     58.0
2     38.0
3     46.0
4     41.0
      ... 
72    31.0
73    39.0
74    32.0
75    60.0
76    33.0
Name: age, Length: 77, dtype: float64
publications
---
0     72
1     43
2     23
3     64
4     23
      ..
72     3
73     7
74     9
75     9
76     5
Name: publications, Length: 77, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Finally, if you want to step through row-by-row use the <code class="docutils literal notranslate"><span class="pre">.iterrows()</span></code> method.</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0, salary          86285
gender              0
departm           bio
years              26
age                64
publications       72
Name: 0, dtype: object)
(1, salary          77125
gender              0
departm           bio
years              28
age                58
publications       43
Name: 1, dtype: object)
(2, salary          71922
gender              0
departm           bio
years              10
age                38
publications       23
Name: 2, dtype: object)
(3, salary          70499
gender              0
departm           bio
years              16
age                46
publications       64
Name: 3, dtype: object)
(4, salary          66624
gender              0
departm           bio
years              11
age                41
publications       23
Name: 4, dtype: object)
(5, salary          64451
gender              0
departm           bio
years              23
age                60
publications       44
Name: 5, dtype: object)
(6, salary          64366
gender              0
departm           bio
years              23
age                53
publications       22
Name: 6, dtype: object)
(7, salary          59344
gender              0
departm           bio
years               5
age                40
publications       11
Name: 7, dtype: object)
(8, salary          58560
gender              0
departm           bio
years               8
age                38
publications        8
Name: 8, dtype: object)
(9, salary          58294
gender              0
departm           bio
years              20
age                50
publications       12
Name: 9, dtype: object)
(10, salary          56092
gender              0
departm           bio
years               2
age                40
publications        4
Name: 10, dtype: object)
(11, salary          54452
gender              0
departm           bio
years              13
age                43
publications        7
Name: 11, dtype: object)
(12, salary          54269
gender              0
departm           bio
years              26
age                56
publications       12
Name: 12, dtype: object)
(13, salary          55125
gender              0
departm           bio
years               8
age                38
publications        9
Name: 13, dtype: object)
(14, salary          97630
gender              0
departm          chem
years              34
age                64
publications       43
Name: 14, dtype: object)
(15, salary          82444
gender              0
departm          chem
years              31
age                61
publications       42
Name: 15, dtype: object)
(16, salary          76291
gender              0
departm          chem
years              29
age                65
publications       33
Name: 16, dtype: object)
(17, salary          75382
gender              0
departm          chem
years              26
age                56
publications       39
Name: 17, dtype: object)
(18, salary          64762
gender              0
departm          chem
years              25
age               NaN
publications       29
Name: 18, dtype: object)
(19, salary          62607
gender              0
departm          chem
years              20
age                45
publications       34
Name: 19, dtype: object)
(20, salary          60373
gender              0
departm          chem
years              26
age                56
publications       43
Name: 20, dtype: object)
(21, salary          58892
gender              0
departm          chem
years              18
age                48
publications       21
Name: 21, dtype: object)
(22, salary          47021
gender              0
departm          chem
years               4
age                34
publications       12
Name: 22, dtype: object)
(23, salary          44687
gender              0
departm          chem
years               4
age                34
publications       19
Name: 23, dtype: object)
(24, salary          104828
gender               0
departm           geol
years              NaN
age                 50
publications        44
Name: 24, dtype: object)
(25, salary          71456
gender              0
departm          geol
years              11
age                41
publications       32
Name: 25, dtype: object)
(26, salary          65144
gender              0
departm          geol
years               7
age                37
publications       12
Name: 26, dtype: object)
(27, salary          52766
gender              0
departm          geol
years               4
age                38
publications       32
Name: 27, dtype: object)
(28, salary          112800
gender               0
departm          neuro
years               14
age                 44
publications        33
Name: 28, dtype: object)
(29, salary          105761
gender               0
departm          neuro
years                9
age                 39
publications        30
Name: 29, dtype: object)
(30, salary          92951
gender              0
departm         neuro
years              11
age                41
publications       20
Name: 30, dtype: object)
(31, salary          86621
gender              0
departm         neuro
years              19
age                49
publications       10
Name: 31, dtype: object)
(32, salary          85569
gender              0
departm         neuro
years              20
age                46
publications       35
Name: 32, dtype: object)
(33, salary          83896
gender              0
departm         neuro
years              10
age                40
publications       22
Name: 33, dtype: object)
(34, salary          79735
gender              0
departm         neuro
years              11
age                41
publications       32
Name: 34, dtype: object)
(35, salary          71518
gender              0
departm         neuro
years               7
age                37
publications       34
Name: 35, dtype: object)
(36, salary          68029
gender              0
departm         neuro
years              15
age                45
publications       33
Name: 36, dtype: object)
(37, salary          66482
gender              0
departm         neuro
years              14
age                44
publications       42
Name: 37, dtype: object)
(38, salary          61680
gender              0
departm         neuro
years              18
age                48
publications       20
Name: 38, dtype: object)
(39, salary          60455
gender              0
departm         neuro
years               8
age                38
publications       49
Name: 39, dtype: object)
(40, salary          58932
gender              0
departm         neuro
years              11
age                41
publications       49
Name: 40, dtype: object)
(41, salary          106412
gender               0
departm           stat
years               23
age                 53
publications        29
Name: 41, dtype: object)
(42, salary          86980
gender              0
departm          stat
years              23
age                53
publications       42
Name: 42, dtype: object)
(43, salary          78114
gender              0
departm          stat
years               8
age                38
publications       24
Name: 43, dtype: object)
(44, salary          74085
gender              0
departm          stat
years              11
age                41
publications       33
Name: 44, dtype: object)
(45, salary          72250
gender              0
departm          stat
years              26
age                56
publications        9
Name: 45, dtype: object)
(46, salary          69596
gender              0
departm          stat
years              20
age                50
publications       18
Name: 46, dtype: object)
(47, salary          65285
gender              0
departm          stat
years              20
age                50
publications       15
Name: 47, dtype: object)
(48, salary          62557
gender              0
departm          stat
years              28
age                58
publications       14
Name: 48, dtype: object)
(49, salary          61947
gender              0
departm          stat
years              22
age                58
publications       17
Name: 49, dtype: object)
(50, salary          58565
gender              0
departm          stat
years              29
age                59
publications       11
Name: 50, dtype: object)
(51, salary          58365
gender              0
departm          stat
years              18
age                48
publications       21
Name: 51, dtype: object)
(52, salary          53656
gender              0
departm          stat
years               2
age                32
publications        4
Name: 52, dtype: object)
(53, salary          51391
gender              0
departm          stat
years               5
age                35
publications        8
Name: 53, dtype: object)
(54, salary            96936
gender                0
departm         physics
years                15
age                  50
publications         17
Name: 54, dtype: object)
(55, salary            83216
gender                0
departm         physics
years                11
age                  37
publications         19
Name: 55, dtype: object)
(56, salary            72044
gender                0
departm         physics
years                 2
age                  32
publications         16
Name: 56, dtype: object)
(57, salary            64048
gender                0
departm         physics
years                23
age                  53
publications          4
Name: 57, dtype: object)
(58, salary            58888
gender                0
departm         physics
years                26
age                  56
publications          7
Name: 58, dtype: object)
(59, salary            58744
gender                0
departm         physics
years                20
age                  50
publications          9
Name: 59, dtype: object)
(60, salary            55944
gender                0
departm         physics
years                21
age                  51
publications          8
Name: 60, dtype: object)
(61, salary            54076
gender                0
departm         physics
years                19
age                  49
publications         12
Name: 61, dtype: object)
(62, salary          82142
gender              0
departm          math
years               9
age                39
publications        9
Name: 62, dtype: object)
(63, salary          70509
gender              0
departm          math
years              23
age                53
publications        7
Name: 63, dtype: object)
(64, salary          60320
gender              0
departm          math
years              14
age                44
publications        7
Name: 64, dtype: object)
(65, salary          55814
gender              0
departm          math
years               8
age                38
publications        6
Name: 65, dtype: object)
(66, salary          53638
gender              0
departm          math
years               4
age                42
publications        8
Name: 66, dtype: object)
(67, salary          53517
gender              2
departm          math
years               5
age                35
publications        5
Name: 67, dtype: object)
(68, salary          59139
gender              1
departm           bio
years               8
age                38
publications       23
Name: 68, dtype: object)
(69, salary          52968
gender              1
departm           bio
years              18
age                48
publications       32
Name: 69, dtype: object)
(70, salary          55949
gender              1
departm          chem
years               4
age                34
publications       12
Name: 70, dtype: object)
(71, salary          58893
gender              1
departm         neuro
years              10
age                35
publications        4
Name: 71, dtype: object)
(72, salary          53662
gender              1
departm         neuro
years               1
age                31
publications        3
Name: 72, dtype: object)
(73, salary          57185
gender              1
departm          stat
years               9
age                39
publications        7
Name: 73, dtype: object)
(74, salary          52254
gender              1
departm          stat
years               2
age                32
publications        9
Name: 74, dtype: object)
(75, salary          61885
gender              1
departm          math
years              23
age                60
publications        9
Name: 75, dtype: object)
(76, salary          49542
gender              1
departm          math
years               3
age                33
publications        5
Name: 76, dtype: object)
</pre></div>
</div>
</div>
</div>
<p>A <a class="reference external" href="https://medium.com/&#64;formigone/stop-using-df-iterrows-2fbc2931b60e">substantially faster version</a> of <code class="docutils literal notranslate"><span class="pre">.iterrows()</span></code> is <code class="docutils literal notranslate"><span class="pre">.itertuples()</span></code> which returns a slightly different representation of each row:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Pandas(Index=0, salary=86285, gender=0, departm=&#39;bio&#39;, years=26.0, age=64.0, publications=72)
Pandas(Index=1, salary=77125, gender=0, departm=&#39;bio&#39;, years=28.0, age=58.0, publications=43)
Pandas(Index=2, salary=71922, gender=0, departm=&#39;bio&#39;, years=10.0, age=38.0, publications=23)
Pandas(Index=3, salary=70499, gender=0, departm=&#39;bio&#39;, years=16.0, age=46.0, publications=64)
Pandas(Index=4, salary=66624, gender=0, departm=&#39;bio&#39;, years=11.0, age=41.0, publications=23)
Pandas(Index=5, salary=64451, gender=0, departm=&#39;bio&#39;, years=23.0, age=60.0, publications=44)
Pandas(Index=6, salary=64366, gender=0, departm=&#39;bio&#39;, years=23.0, age=53.0, publications=22)
Pandas(Index=7, salary=59344, gender=0, departm=&#39;bio&#39;, years=5.0, age=40.0, publications=11)
Pandas(Index=8, salary=58560, gender=0, departm=&#39;bio&#39;, years=8.0, age=38.0, publications=8)
Pandas(Index=9, salary=58294, gender=0, departm=&#39;bio&#39;, years=20.0, age=50.0, publications=12)
Pandas(Index=10, salary=56092, gender=0, departm=&#39;bio&#39;, years=2.0, age=40.0, publications=4)
Pandas(Index=11, salary=54452, gender=0, departm=&#39;bio&#39;, years=13.0, age=43.0, publications=7)
Pandas(Index=12, salary=54269, gender=0, departm=&#39;bio&#39;, years=26.0, age=56.0, publications=12)
Pandas(Index=13, salary=55125, gender=0, departm=&#39;bio&#39;, years=8.0, age=38.0, publications=9)
Pandas(Index=14, salary=97630, gender=0, departm=&#39;chem&#39;, years=34.0, age=64.0, publications=43)
Pandas(Index=15, salary=82444, gender=0, departm=&#39;chem&#39;, years=31.0, age=61.0, publications=42)
Pandas(Index=16, salary=76291, gender=0, departm=&#39;chem&#39;, years=29.0, age=65.0, publications=33)
Pandas(Index=17, salary=75382, gender=0, departm=&#39;chem&#39;, years=26.0, age=56.0, publications=39)
Pandas(Index=18, salary=64762, gender=0, departm=&#39;chem&#39;, years=25.0, age=nan, publications=29)
Pandas(Index=19, salary=62607, gender=0, departm=&#39;chem&#39;, years=20.0, age=45.0, publications=34)
Pandas(Index=20, salary=60373, gender=0, departm=&#39;chem&#39;, years=26.0, age=56.0, publications=43)
Pandas(Index=21, salary=58892, gender=0, departm=&#39;chem&#39;, years=18.0, age=48.0, publications=21)
Pandas(Index=22, salary=47021, gender=0, departm=&#39;chem&#39;, years=4.0, age=34.0, publications=12)
Pandas(Index=23, salary=44687, gender=0, departm=&#39;chem&#39;, years=4.0, age=34.0, publications=19)
Pandas(Index=24, salary=104828, gender=0, departm=&#39;geol&#39;, years=nan, age=50.0, publications=44)
Pandas(Index=25, salary=71456, gender=0, departm=&#39;geol&#39;, years=11.0, age=41.0, publications=32)
Pandas(Index=26, salary=65144, gender=0, departm=&#39;geol&#39;, years=7.0, age=37.0, publications=12)
Pandas(Index=27, salary=52766, gender=0, departm=&#39;geol&#39;, years=4.0, age=38.0, publications=32)
Pandas(Index=28, salary=112800, gender=0, departm=&#39;neuro&#39;, years=14.0, age=44.0, publications=33)
Pandas(Index=29, salary=105761, gender=0, departm=&#39;neuro&#39;, years=9.0, age=39.0, publications=30)
Pandas(Index=30, salary=92951, gender=0, departm=&#39;neuro&#39;, years=11.0, age=41.0, publications=20)
Pandas(Index=31, salary=86621, gender=0, departm=&#39;neuro&#39;, years=19.0, age=49.0, publications=10)
Pandas(Index=32, salary=85569, gender=0, departm=&#39;neuro&#39;, years=20.0, age=46.0, publications=35)
Pandas(Index=33, salary=83896, gender=0, departm=&#39;neuro&#39;, years=10.0, age=40.0, publications=22)
Pandas(Index=34, salary=79735, gender=0, departm=&#39;neuro&#39;, years=11.0, age=41.0, publications=32)
Pandas(Index=35, salary=71518, gender=0, departm=&#39;neuro&#39;, years=7.0, age=37.0, publications=34)
Pandas(Index=36, salary=68029, gender=0, departm=&#39;neuro&#39;, years=15.0, age=45.0, publications=33)
Pandas(Index=37, salary=66482, gender=0, departm=&#39;neuro&#39;, years=14.0, age=44.0, publications=42)
Pandas(Index=38, salary=61680, gender=0, departm=&#39;neuro&#39;, years=18.0, age=48.0, publications=20)
Pandas(Index=39, salary=60455, gender=0, departm=&#39;neuro&#39;, years=8.0, age=38.0, publications=49)
Pandas(Index=40, salary=58932, gender=0, departm=&#39;neuro&#39;, years=11.0, age=41.0, publications=49)
Pandas(Index=41, salary=106412, gender=0, departm=&#39;stat&#39;, years=23.0, age=53.0, publications=29)
Pandas(Index=42, salary=86980, gender=0, departm=&#39;stat&#39;, years=23.0, age=53.0, publications=42)
Pandas(Index=43, salary=78114, gender=0, departm=&#39;stat&#39;, years=8.0, age=38.0, publications=24)
Pandas(Index=44, salary=74085, gender=0, departm=&#39;stat&#39;, years=11.0, age=41.0, publications=33)
Pandas(Index=45, salary=72250, gender=0, departm=&#39;stat&#39;, years=26.0, age=56.0, publications=9)
Pandas(Index=46, salary=69596, gender=0, departm=&#39;stat&#39;, years=20.0, age=50.0, publications=18)
Pandas(Index=47, salary=65285, gender=0, departm=&#39;stat&#39;, years=20.0, age=50.0, publications=15)
Pandas(Index=48, salary=62557, gender=0, departm=&#39;stat&#39;, years=28.0, age=58.0, publications=14)
Pandas(Index=49, salary=61947, gender=0, departm=&#39;stat&#39;, years=22.0, age=58.0, publications=17)
Pandas(Index=50, salary=58565, gender=0, departm=&#39;stat&#39;, years=29.0, age=59.0, publications=11)
Pandas(Index=51, salary=58365, gender=0, departm=&#39;stat&#39;, years=18.0, age=48.0, publications=21)
Pandas(Index=52, salary=53656, gender=0, departm=&#39;stat&#39;, years=2.0, age=32.0, publications=4)
Pandas(Index=53, salary=51391, gender=0, departm=&#39;stat&#39;, years=5.0, age=35.0, publications=8)
Pandas(Index=54, salary=96936, gender=0, departm=&#39;physics&#39;, years=15.0, age=50.0, publications=17)
Pandas(Index=55, salary=83216, gender=0, departm=&#39;physics&#39;, years=11.0, age=37.0, publications=19)
Pandas(Index=56, salary=72044, gender=0, departm=&#39;physics&#39;, years=2.0, age=32.0, publications=16)
Pandas(Index=57, salary=64048, gender=0, departm=&#39;physics&#39;, years=23.0, age=53.0, publications=4)
Pandas(Index=58, salary=58888, gender=0, departm=&#39;physics&#39;, years=26.0, age=56.0, publications=7)
Pandas(Index=59, salary=58744, gender=0, departm=&#39;physics&#39;, years=20.0, age=50.0, publications=9)
Pandas(Index=60, salary=55944, gender=0, departm=&#39;physics&#39;, years=21.0, age=51.0, publications=8)
Pandas(Index=61, salary=54076, gender=0, departm=&#39;physics&#39;, years=19.0, age=49.0, publications=12)
Pandas(Index=62, salary=82142, gender=0, departm=&#39;math&#39;, years=9.0, age=39.0, publications=9)
Pandas(Index=63, salary=70509, gender=0, departm=&#39;math&#39;, years=23.0, age=53.0, publications=7)
Pandas(Index=64, salary=60320, gender=0, departm=&#39;math&#39;, years=14.0, age=44.0, publications=7)
Pandas(Index=65, salary=55814, gender=0, departm=&#39;math&#39;, years=8.0, age=38.0, publications=6)
Pandas(Index=66, salary=53638, gender=0, departm=&#39;math&#39;, years=4.0, age=42.0, publications=8)
Pandas(Index=67, salary=53517, gender=2, departm=&#39;math&#39;, years=5.0, age=35.0, publications=5)
Pandas(Index=68, salary=59139, gender=1, departm=&#39;bio&#39;, years=8.0, age=38.0, publications=23)
Pandas(Index=69, salary=52968, gender=1, departm=&#39;bio&#39;, years=18.0, age=48.0, publications=32)
Pandas(Index=70, salary=55949, gender=1, departm=&#39;chem&#39;, years=4.0, age=34.0, publications=12)
Pandas(Index=71, salary=58893, gender=1, departm=&#39;neuro&#39;, years=10.0, age=35.0, publications=4)
Pandas(Index=72, salary=53662, gender=1, departm=&#39;neuro&#39;, years=1.0, age=31.0, publications=3)
Pandas(Index=73, salary=57185, gender=1, departm=&#39;stat&#39;, years=9.0, age=39.0, publications=7)
Pandas(Index=74, salary=52254, gender=1, departm=&#39;stat&#39;, years=2.0, age=32.0, publications=9)
Pandas(Index=75, salary=61885, gender=1, departm=&#39;math&#39;, years=23.0, age=60.0, publications=9)
Pandas(Index=76, salary=49542, gender=1, departm=&#39;math&#39;, years=3.0, age=33.0, publications=5)
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="data-organization-tidy-and-wide-formats">
<h2><span class="section-number">6.11. </span>Data organization - tidy and wide formats<a class="headerlink" href="#data-organization-tidy-and-wide-formats" title="Permalink to this headline">¶</a></h2>
<p>Now that you have seen how to import your data and the basic operations of dataframe, you might think that you’re now ready to start analyzing and visualizing your data—yet there’s still quite a bit of work that has to be done cleaning up your dataset before you do this. Some of this clean up might include fixing typos in your datasets, or filtering out participants with incomplete data. But even more important, you’ll need to make sure that your data is organized and structured in a consistent manner. One way of organizing your data, referred to as <strong>tidy format</strong> (<a href="https://vita.had.co.nz/papers/tidy-data.pdf">a term coined by Hadley Wickham</a>), is particularly helpful for facilitating data analysis.</p>
<p>To clarify what tidy format is, we will also talk about another common format of data called <strong>wide format</strong> that isn’t very tidy. While there are some reasons to use wide format over tidy format when programming (e.g., some functions in R require data to be in wide format), wide format is more commonly used when working with interface-based software (such as Excel and SPSS).</p>
<p>The clearest way of demonstrating the differences between wide versus tidy formats is by simply looking at datasets of both kinds. Take the example dataset below. It shows quiz scores for four participants across three timepoints plus some demographic data. It’s currently in wide format:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span> 

<span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;tom&#39;</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> 
        <span class="p">[</span><span class="s1">&#39;nick&#39;</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span> 
        <span class="p">[</span><span class="s1">&#39;julie&#39;</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span> 
        <span class="p">[</span><span class="s1">&#39;angela&#39;</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">]]</span> 
<span class="n">df_wide</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;time1&#39;</span><span class="p">,</span> <span class="s1">&#39;time2&#39;</span><span class="p">,</span> <span class="s1">&#39;time3&#39;</span><span class="p">])</span> 
<span class="n">df_wide</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>age</th>
      <th>gender</th>
      <th>time1</th>
      <th>time2</th>
      <th>time3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>tom</td>
      <td>26</td>
      <td>m</td>
      <td>12</td>
      <td>15</td>
      <td>15</td>
    </tr>
    <tr>
      <th>1</th>
      <td>nick</td>
      <td>23</td>
      <td>m</td>
      <td>10</td>
      <td>9</td>
      <td>12</td>
    </tr>
    <tr>
      <th>2</th>
      <td>julie</td>
      <td>18</td>
      <td>f</td>
      <td>15</td>
      <td>13</td>
      <td>14</td>
    </tr>
    <tr>
      <th>3</th>
      <td>angela</td>
      <td>21</td>
      <td>f</td>
      <td>10</td>
      <td>10</td>
      <td>12</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>In wide format, each <em>individual</em> has their own row, and all data pertaining to that individual is contained within that row. For example, the first row has all of the data for Tom, including his scores across each of the three timepoints.</p>
<p>Now let’s compare this to tidy format:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_tidy</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">df_wide</span><span class="p">,</span> <span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">],</span> <span class="n">var_name</span><span class="o">=</span><span class="s1">&#39;timepoint&#39;</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s1">&#39;score&#39;</span><span class="p">)</span> 
<span class="n">df_tidy</span> <span class="o">=</span> <span class="n">df_tidy</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
<span class="n">df_tidy</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>age</th>
      <th>gender</th>
      <th>timepoint</th>
      <th>score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>tom</td>
      <td>26</td>
      <td>m</td>
      <td>time1</td>
      <td>12</td>
    </tr>
    <tr>
      <th>4</th>
      <td>tom</td>
      <td>26</td>
      <td>m</td>
      <td>time2</td>
      <td>15</td>
    </tr>
    <tr>
      <th>8</th>
      <td>tom</td>
      <td>26</td>
      <td>m</td>
      <td>time3</td>
      <td>15</td>
    </tr>
    <tr>
      <th>1</th>
      <td>nick</td>
      <td>23</td>
      <td>m</td>
      <td>time1</td>
      <td>10</td>
    </tr>
    <tr>
      <th>5</th>
      <td>nick</td>
      <td>23</td>
      <td>m</td>
      <td>time2</td>
      <td>9</td>
    </tr>
    <tr>
      <th>9</th>
      <td>nick</td>
      <td>23</td>
      <td>m</td>
      <td>time3</td>
      <td>12</td>
    </tr>
    <tr>
      <th>2</th>
      <td>julie</td>
      <td>18</td>
      <td>f</td>
      <td>time1</td>
      <td>15</td>
    </tr>
    <tr>
      <th>6</th>
      <td>julie</td>
      <td>18</td>
      <td>f</td>
      <td>time2</td>
      <td>13</td>
    </tr>
    <tr>
      <th>10</th>
      <td>julie</td>
      <td>18</td>
      <td>f</td>
      <td>time3</td>
      <td>14</td>
    </tr>
    <tr>
      <th>3</th>
      <td>angela</td>
      <td>21</td>
      <td>f</td>
      <td>time1</td>
      <td>10</td>
    </tr>
    <tr>
      <th>7</th>
      <td>angela</td>
      <td>21</td>
      <td>f</td>
      <td>time2</td>
      <td>10</td>
    </tr>
    <tr>
      <th>11</th>
      <td>angela</td>
      <td>21</td>
      <td>f</td>
      <td>time3</td>
      <td>12</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>In this format, now each <em>observation</em> has their own row. That is, we now have three separate rows for Tom, with each row reflecting a single quiz score from one of the three timepoints.</p>
<div class="section" id="what-is-tidy-data-and-why-use-it">
<h3><span class="section-number">6.11.1. </span>What is tidy data, and why use it?<a class="headerlink" href="#what-is-tidy-data-and-why-use-it" title="Permalink to this headline">¶</a></h3>
<p>Pulling directly from <a href="https://r4ds.had.co.nz/tidy-data.html">Wickham’s book chapter on tidy data</a> (his book is written for R users, but the principles of tidying data works the same across languages), there are three rules that work together to make a dataset tidy (<span id="id4">[<a class="reference internal" href="#id66">Wickham and Grolemund, 2017</a>]</span>):</p>
<ol class="simple">
<li><p>Each <em>observation</em> must have its own row (observations could be <em>each person</em>, <em>each timepoint</em>, etc.)</p></li>
<li><p>Each <em>variable</em> must have its own column (variables are some kind of measurement: <em>gender</em>, <em>age</em>, <em>score</em>, etc.)</p></li>
<li><p>Each <em>value</em> must have its own cell (value are the actual measurement: <em>female</em>, <em>23 years</em>, <em>12 points</em>, etc.)</p></li>
</ol>
<div style="text-align: center">
    <img src="./images/tidy_data.png" width="600">
</div>
Above, a visual representation of each of the three rules for tidy data: variables are in columns, observations are in rows, and values are in cells. Image borrowed from <a href="https://r4ds.had.co.nz/tidy-data.html"><i>R for Data Science</i></a>.
<p>So going back to our dataset from before, we can see that it follows each of these three rules. Each person and each timepoint has their own rows (Rule 1). Every type of data measured (gender, age, etc.) has their own column (Rule 2), and each cell within the dataframe has only one value (Rule 3).</p>
<p>Let’s look at some examples where one or more of these rules are being violated.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_untidy</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;tom&#39;</span><span class="p">,</span> <span class="s2">&quot;26_m&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> 
              <span class="p">[</span><span class="s1">&#39;nick&#39;</span><span class="p">,</span> <span class="s2">&quot;23_m&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span> 
              <span class="p">[</span><span class="s1">&#39;julie&#39;</span><span class="p">,</span> <span class="s2">&quot;18_f&quot;</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span> 
              <span class="p">[</span><span class="s1">&#39;angela&#39;</span><span class="p">,</span> <span class="s2">&quot;21_f&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">]]</span> 
<span class="n">df_untidy</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data_untidy</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;age_gender&#39;</span><span class="p">,</span> <span class="s1">&#39;time1&#39;</span><span class="p">,</span> <span class="s1">&#39;time2&#39;</span><span class="p">,</span> <span class="s1">&#39;time3&#39;</span><span class="p">])</span>
<span class="n">df_untidy</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>age_gender</th>
      <th>time1</th>
      <th>time2</th>
      <th>time3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>tom</td>
      <td>26_m</td>
      <td>12</td>
      <td>15</td>
      <td>15</td>
    </tr>
    <tr>
      <th>1</th>
      <td>nick</td>
      <td>23_m</td>
      <td>10</td>
      <td>9</td>
      <td>12</td>
    </tr>
    <tr>
      <th>2</th>
      <td>julie</td>
      <td>18_f</td>
      <td>15</td>
      <td>13</td>
      <td>14</td>
    </tr>
    <tr>
      <th>3</th>
      <td>angela</td>
      <td>21_f</td>
      <td>10</td>
      <td>10</td>
      <td>12</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>In the example above, this dataset is messy because two variables (age and gender) have been coded into the same column. Having multiple variables in the same column in this way makes it much harder to calculate the average age of participants or get a gender breakdown for the sample.</p>
<p>But this can easily be fixed by splitting the column into two.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_untidy</span><span class="p">[[</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df_untidy</span><span class="o">.</span><span class="n">age_gender</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">del</span> <span class="n">df_untidy</span><span class="p">[</span><span class="s1">&#39;age_gender&#39;</span><span class="p">]</span>

<span class="n">df_untidy</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>time1</th>
      <th>time2</th>
      <th>time3</th>
      <th>age</th>
      <th>gender</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>tom</td>
      <td>12</td>
      <td>15</td>
      <td>15</td>
      <td>26</td>
      <td>m</td>
    </tr>
    <tr>
      <th>1</th>
      <td>nick</td>
      <td>10</td>
      <td>9</td>
      <td>12</td>
      <td>23</td>
      <td>m</td>
    </tr>
    <tr>
      <th>2</th>
      <td>julie</td>
      <td>15</td>
      <td>13</td>
      <td>14</td>
      <td>18</td>
      <td>f</td>
    </tr>
    <tr>
      <th>3</th>
      <td>angela</td>
      <td>10</td>
      <td>10</td>
      <td>12</td>
      <td>21</td>
      <td>f</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Here’s another case of untidy data, similar to one we’ve seen before.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_messy</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;tom&#39;</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> 
              <span class="p">[</span><span class="s1">&#39;nick&#39;</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">],</span> 
              <span class="p">[</span><span class="s1">&#39;julie&#39;</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">19</span><span class="p">],</span> 
              <span class="p">[</span><span class="s1">&#39;angela&#39;</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">]]</span> 
<span class="n">df_messy</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data_messy</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;t1_min&#39;</span><span class="p">,</span> <span class="s1">&#39;t1_max&#39;</span><span class="p">,</span> <span class="s1">&#39;t2_min&#39;</span><span class="p">,</span> <span class="s1">&#39;t2_max&#39;</span><span class="p">,</span> <span class="s1">&#39;t3_min&#39;</span><span class="p">,</span> <span class="s1">&#39;t3_max&#39;</span><span class="p">])</span>
<span class="n">df_messy</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>age</th>
      <th>t1_min</th>
      <th>t1_max</th>
      <th>t2_min</th>
      <th>t2_max</th>
      <th>t3_min</th>
      <th>t3_max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>tom</td>
      <td>26</td>
      <td>12</td>
      <td>15</td>
      <td>15</td>
      <td>17</td>
      <td>18</td>
      <td>20</td>
    </tr>
    <tr>
      <th>1</th>
      <td>nick</td>
      <td>23</td>
      <td>10</td>
      <td>19</td>
      <td>12</td>
      <td>14</td>
      <td>11</td>
      <td>18</td>
    </tr>
    <tr>
      <th>2</th>
      <td>julie</td>
      <td>18</td>
      <td>15</td>
      <td>23</td>
      <td>14</td>
      <td>18</td>
      <td>12</td>
      <td>19</td>
    </tr>
    <tr>
      <th>3</th>
      <td>angela</td>
      <td>21</td>
      <td>10</td>
      <td>11</td>
      <td>12</td>
      <td>14</td>
      <td>15</td>
      <td>30</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>This dataset violates the rules of a tidy dataset because a) there’s more than one observation in each row, and b) we have multiple columns reflecting the same variable (the distinction between a minimum and maximum score).</p>
<p>But we can fix it using <code class="docutils literal notranslate"><span class="pre">pd.melt</span></code> with a combination of few other things. In this tidied version, we now see that each variable (<em>name</em>, <em>age</em>, <em>time</em>, <em>min</em> score, and <em>max</em> score) all have their own columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_messy</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">df_messy</span><span class="p">,</span> <span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">],</span> <span class="n">var_name</span><span class="o">=</span><span class="s1">&#39;time_minmax&#39;</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s1">&#39;score&#39;</span><span class="p">)</span>

<span class="n">df_messy</span><span class="p">[[</span><span class="s1">&#39;time&#39;</span><span class="p">,</span><span class="s1">&#39;minmax&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df_messy</span><span class="o">.</span><span class="n">time_minmax</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="n">expand</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="k">del</span> <span class="n">df_messy</span><span class="p">[</span><span class="s1">&#39;time_minmax&#39;</span><span class="p">]</span>

<span class="n">df_messy</span> <span class="o">=</span> <span class="n">df_messy</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;minmax&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;score&#39;</span><span class="p">)</span>
<span class="n">df_messy</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df_messy</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>minmax</th>
      <th>name</th>
      <th>age</th>
      <th>time</th>
      <th>max</th>
      <th>min</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>angela</td>
      <td>21</td>
      <td>t1</td>
      <td>11</td>
      <td>10</td>
    </tr>
    <tr>
      <th>1</th>
      <td>angela</td>
      <td>21</td>
      <td>t2</td>
      <td>14</td>
      <td>12</td>
    </tr>
    <tr>
      <th>2</th>
      <td>angela</td>
      <td>21</td>
      <td>t3</td>
      <td>30</td>
      <td>15</td>
    </tr>
    <tr>
      <th>3</th>
      <td>julie</td>
      <td>18</td>
      <td>t1</td>
      <td>23</td>
      <td>15</td>
    </tr>
    <tr>
      <th>4</th>
      <td>julie</td>
      <td>18</td>
      <td>t2</td>
      <td>18</td>
      <td>14</td>
    </tr>
    <tr>
      <th>5</th>
      <td>julie</td>
      <td>18</td>
      <td>t3</td>
      <td>19</td>
      <td>12</td>
    </tr>
    <tr>
      <th>6</th>
      <td>nick</td>
      <td>23</td>
      <td>t1</td>
      <td>19</td>
      <td>10</td>
    </tr>
    <tr>
      <th>7</th>
      <td>nick</td>
      <td>23</td>
      <td>t2</td>
      <td>14</td>
      <td>12</td>
    </tr>
    <tr>
      <th>8</th>
      <td>nick</td>
      <td>23</td>
      <td>t3</td>
      <td>18</td>
      <td>11</td>
    </tr>
    <tr>
      <th>9</th>
      <td>tom</td>
      <td>26</td>
      <td>t1</td>
      <td>15</td>
      <td>12</td>
    </tr>
    <tr>
      <th>10</th>
      <td>tom</td>
      <td>26</td>
      <td>t2</td>
      <td>17</td>
      <td>15</td>
    </tr>
    <tr>
      <th>11</th>
      <td>tom</td>
      <td>26</td>
      <td>t3</td>
      <td>20</td>
      <td>18</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Don’t worry if the actual code to make the data tidy doesn’t make sense right away (you will get there). We’ll talk more later about strategies you can use to wrangle data into tidy formats using Python. What you should be taking away from these examples is the differences in how these datasets are structured both before and after we tidied them.</p>
<p>Cleaning up and rearranging datasets is inevitable part of doing psychological research. Lots of data you work with may come to you in untidy formats, and you will have to clean that data up before you can analyze it. The good news is that knowing these principles of tidy, organized datasets will serve you well as you to start to design your experiments! <strong>The more you can build in tidy principles into how your data is recorded during the experiment, the more time you can save later when it comes to processing your data in Python.</strong></p>
<p>Also importantly, this discussion highlights one major purpose of the Pandas library: namely to help you clean up and reorganize data.  The commands like <code class="docutils literal notranslate"><span class="pre">pd.melt()</span></code> and <code class="docutils literal notranslate"><span class="pre">pd.pivot_table()</span></code> are pretty complex operations which alter your view of a dataset and make it easier to perform certain types of analysis.  These reorganizations of data can be very difficult to do by hand but are facilitated by the dataframe library provided by Pandas.</p>
</div>
<div class="section" id="a-case-example-organizing-data-for-an-psychological-experiment">
<h3><span class="section-number">6.11.2. </span>A case example: organizing data for an psychological experiment<a class="headerlink" href="#a-case-example-organizing-data-for-an-psychological-experiment" title="Permalink to this headline">¶</a></h3>
<p>The discussion so far might strike you as somewhat abstract.  However, principles of data formatting and organization are very important for psychological research.  Let’s consider the case most central to this course which is organizing a data file for a psychological experiment conducted on several participants composed of multiple trials and trial types. This is perhaps the most typical type of data format we will encounter in this work and is somewhat different from survey questions and other types of data which has a more complex structure often.</p>
<p>To keep things simple, let’s imagine that we are doing a decision making experiment.  On each trial of the experiment the subject will be offered a choice between a gamble and a sure amount of money.  For instance the subject might be presented with an option like “Would you prefer $10 now or a 50% chance to win 20 dollars otherwise nothing.”  If you think about it a bit for this specific pair of options they <em>on average</em> give the same expected value because the expected value of the uncertain option is <span class="math notranslate nohighlight">\(0.5*\$20 + 0.5*0 = \$10.\)</span>  If people were perfectly rational they should be indifferent between these two gambles.  However, a common phenomena is that people show a biased called <strong>risk aversion</strong> where they prefer a certain reward over a risky gamble.  Thus, even though on average you get the same, they do not want to take the gamble for the larger amount of money.  There are several explanations of this but one intuitive one is that people don’t like regret and the feeling if you get nothing is so bad that makes people prefer the certain $10.</p>
<p>So imagine we do an experiment attempting to explore loss aversion.  We might present people with several of these types of gambles across multiple trials.  The reason is that we want more than one measurement and want to vary things like the probability of the higher reward on the risky gamble (e.g., instead of 50% chance we might want to explore 10% chance of winning).  In addition, we might want to change the magnitudes of the rewards across different trials.   Finally we will want to run multiple people so that our conclusions aren’t tied to one person.  How should we structure our data file for this?  You might think that we should first write the code for the experiment and then consider the data format.  However, I find it is usually helpful to do the opposite.  We start with the data format in mind right from the start.</p>
<p>Let’s look back at the key idea in a “tidy” dataset because we definitely want to be tidy here.</p>
<ol class="simple">
<li><p>Each <em>observation</em> must have its own row (observations could be <em>each person</em>, <em>each timepoint</em>, etc.)</p></li>
<li><p>Each <em>variable</em> must have its own column (variables are some kind of measurement: <em>gender</em>, <em>age</em>, <em>score</em>, etc.)</p></li>
<li><p>Each <em>value</em> must have its own cell (value are the actual measurement: <em>female</em>, <em>23 years</em>, <em>12 points</em>, etc.)</p></li>
</ol>
<p>So each <em>observation</em> would be a trial and so it needs its own row.</p>
<p>Each <em>variable</em> would be information about the trial, both the details of what the subject saw on that trial (e.g., the magnitude of the rewards and gambles) and also how they responded (reaction time, what choice they made, etc…).</p>
<p>Each <em>value</em> must have its own cell means that each of these numbers need to have their own column and not be combined.  So let’s make a pretend dataframe from scratch to illustrate this example.</p>
<p>So let’s imagine that there are 10 stimuli in the experiment.  We can denote them as the value of the certain option and then the value of the high and low reward for the gamble.  This means each stimulus/trial in the experiment can be described with four numbers:</p>
<ul class="simple">
<li><p>certain value</p></li>
<li><p>upper risky value</p></li>
<li><p>lower risky value</p></li>
<li><p>probability of upper risky value</p></li>
</ul>
<p>We can fix a few alternatives (let’s say enough for 4 trials) using a python dictionary:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stim</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;certain&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">],</span> 
      <span class="s2">&quot;upper_risk&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">32</span><span class="p">],</span> 
      <span class="s2">&quot;lower_risk&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> 
      <span class="s2">&quot;prob&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">]}</span>
</pre></div>
</div>
</div>
</div>
<p>Next we can pretend to generate some responses from one subject.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">responses</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;reaction_time&quot;</span><span class="p">:[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">600</span><span class="p">],</span> 
             <span class="s2">&quot;choice&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]}</span>
</pre></div>
</div>
</div>
</div>
<p>Now we can build up a dataframe for one subject.  We will do this by first defining a python dictionary called <code class="docutils literal notranslate"><span class="pre">trials</span></code> which includes all the <em>variables</em> associated with one measurement  (trial number, the value of the certain gamble, the probabilty, etc…) as well as all the measurements made on that trial (response time, choice).  These start out at the beginning of the cell as empy lists and then a for loop below fills them in.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">subject_id</span> <span class="o">=</span> <span class="s2">&quot;some_subject_id0&quot;</span>

<span class="n">trials</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;subject_id&#39;</span><span class="p">:[],</span>
          <span class="s1">&#39;trial_num&#39;</span><span class="p">:[],</span>
          <span class="s1">&#39;certain&#39;</span><span class="p">:[],</span>
          <span class="s1">&#39;upper_risk&#39;</span><span class="p">:[],</span>
          <span class="s1">&#39;lower_risk&#39;</span><span class="p">:[],</span>
          <span class="s1">&#39;prob&#39;</span><span class="p">:[],</span>
          <span class="s1">&#39;reaction_time&#39;</span><span class="p">:[],</span>
          <span class="s1">&#39;choice&#39;</span><span class="p">:[]}</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="n">trials</span><span class="p">[</span><span class="s1">&#39;subject_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">subject_id</span><span class="p">)</span>
    <span class="n">trials</span><span class="p">[</span><span class="s1">&#39;trial_num&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">trials</span><span class="p">[</span><span class="s1">&#39;certain&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stim</span><span class="p">[</span><span class="s1">&#39;certain&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
    <span class="n">trials</span><span class="p">[</span><span class="s1">&#39;upper_risk&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stim</span><span class="p">[</span><span class="s1">&#39;upper_risk&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
    <span class="n">trials</span><span class="p">[</span><span class="s1">&#39;lower_risk&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stim</span><span class="p">[</span><span class="s1">&#39;lower_risk&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
    <span class="n">trials</span><span class="p">[</span><span class="s1">&#39;prob&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stim</span><span class="p">[</span><span class="s1">&#39;prob&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
    <span class="n">trials</span><span class="p">[</span><span class="s1">&#39;reaction_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">responses</span><span class="p">[</span><span class="s2">&quot;reaction_time&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
    <span class="n">trials</span><span class="p">[</span><span class="s1">&#39;choice&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">responses</span><span class="p">[</span><span class="s2">&quot;choice&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>

<span class="n">trials</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;certain&#39;: [10, 15, 25, 50],
 &#39;choice&#39;: [0, 1, 1, 0],
 &#39;lower_risk&#39;: [0, 23, 29, 0],
 &#39;prob&#39;: [0.5, 0.5, 0.25, 0.75],
 &#39;reaction_time&#39;: [200, 400, 500, 600],
 &#39;subject_id&#39;: [&#39;some_subject_id0&#39;,
  &#39;some_subject_id0&#39;,
  &#39;some_subject_id0&#39;,
  &#39;some_subject_id0&#39;],
 &#39;trial_num&#39;: [0, 1, 2, 3],
 &#39;upper_risk&#39;: [20, 40, 30, 32]}
</pre></div>
</div>
</div>
</div>
<p>The result is a python dictionary that includes column names and then the data that goes in the columns which is perfect for initializing a Pandas dataframe:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">trials</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject_id</th>
      <th>trial_num</th>
      <th>certain</th>
      <th>upper_risk</th>
      <th>lower_risk</th>
      <th>prob</th>
      <th>reaction_time</th>
      <th>choice</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>some_subject_id0</td>
      <td>0</td>
      <td>10</td>
      <td>20</td>
      <td>0</td>
      <td>0.50</td>
      <td>200</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>some_subject_id0</td>
      <td>1</td>
      <td>15</td>
      <td>40</td>
      <td>23</td>
      <td>0.50</td>
      <td>400</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>some_subject_id0</td>
      <td>2</td>
      <td>25</td>
      <td>30</td>
      <td>29</td>
      <td>0.25</td>
      <td>500</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>some_subject_id0</td>
      <td>3</td>
      <td>50</td>
      <td>32</td>
      <td>0</td>
      <td>0.75</td>
      <td>600</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>This is great and shows a very natural way to structure the data from an experiment.  Each trial is a row in the dataframe.  Each column either describes what the stimulus was on that trial or the response from the participant.  In addition two columns code the trial number and the subject idea.  This is critical for analysis as we might be interested in order effects on trials and so we need to know which trials were first or last.  In addition we want to keep subjects separate.  Eventually we will build up a more complex dataframe that includes multiple subjects.  For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stim</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;certain&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">],</span> 
      <span class="s2">&quot;upper_risk&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">32</span><span class="p">],</span> 
      <span class="s2">&quot;lower_risk&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> 
      <span class="s2">&quot;prob&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">]}</span>

<span class="n">trials</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;subject_id&#39;</span><span class="p">:[],</span>
          <span class="s1">&#39;trial_num&#39;</span><span class="p">:[],</span>
          <span class="s1">&#39;certain&#39;</span><span class="p">:[],</span>
          <span class="s1">&#39;upper_risk&#39;</span><span class="p">:[],</span>
          <span class="s1">&#39;lower_risk&#39;</span><span class="p">:[],</span>
          <span class="s1">&#39;prob&#39;</span><span class="p">:[],</span>
          <span class="s1">&#39;reaction_time&#39;</span><span class="p">:[],</span>
          <span class="s1">&#39;choice&#39;</span><span class="p">:[]}</span>

<span class="k">def</span> <span class="nf">generate_subject_data</span><span class="p">(</span><span class="n">subject_id</span><span class="p">,</span> <span class="n">trials</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">trials</span><span class="p">[</span><span class="s1">&#39;subject_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">subject_id</span><span class="p">)</span>
        <span class="n">trials</span><span class="p">[</span><span class="s1">&#39;trial_num&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">trials</span><span class="p">[</span><span class="s1">&#39;certain&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stim</span><span class="p">[</span><span class="s1">&#39;certain&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
        <span class="n">trials</span><span class="p">[</span><span class="s1">&#39;upper_risk&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stim</span><span class="p">[</span><span class="s1">&#39;upper_risk&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
        <span class="n">trials</span><span class="p">[</span><span class="s1">&#39;lower_risk&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stim</span><span class="p">[</span><span class="s1">&#39;lower_risk&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
        <span class="n">trials</span><span class="p">[</span><span class="s1">&#39;prob&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stim</span><span class="p">[</span><span class="s1">&#39;prob&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
        <span class="n">trials</span><span class="p">[</span><span class="s1">&#39;reaction_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">1000</span><span class="p">))</span>
        <span class="n">trials</span><span class="p">[</span><span class="s1">&#39;choice&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
        
<span class="k">for</span> <span class="n">subj</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;some_subject_id0&quot;</span><span class="p">,</span><span class="s2">&quot;some_subject_id1&quot;</span><span class="p">,</span><span class="s2">&quot;some_subject_id2&quot;</span><span class="p">]:</span>
    <span class="n">generate_subject_data</span><span class="p">(</span><span class="n">subj</span><span class="p">,</span><span class="n">trials</span><span class="p">)</span>
    
<span class="n">exp_df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">trials</span><span class="p">)</span>
<span class="n">exp_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject_id</th>
      <th>trial_num</th>
      <th>certain</th>
      <th>upper_risk</th>
      <th>lower_risk</th>
      <th>prob</th>
      <th>reaction_time</th>
      <th>choice</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>some_subject_id0</td>
      <td>0</td>
      <td>10</td>
      <td>20</td>
      <td>0</td>
      <td>0.50</td>
      <td>993</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>some_subject_id0</td>
      <td>1</td>
      <td>15</td>
      <td>40</td>
      <td>23</td>
      <td>0.50</td>
      <td>587</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>some_subject_id0</td>
      <td>2</td>
      <td>25</td>
      <td>30</td>
      <td>29</td>
      <td>0.25</td>
      <td>626</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>some_subject_id0</td>
      <td>3</td>
      <td>50</td>
      <td>32</td>
      <td>0</td>
      <td>0.75</td>
      <td>835</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>some_subject_id1</td>
      <td>0</td>
      <td>10</td>
      <td>20</td>
      <td>0</td>
      <td>0.50</td>
      <td>679</td>
      <td>0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>some_subject_id1</td>
      <td>1</td>
      <td>15</td>
      <td>40</td>
      <td>23</td>
      <td>0.50</td>
      <td>205</td>
      <td>1</td>
    </tr>
    <tr>
      <th>6</th>
      <td>some_subject_id1</td>
      <td>2</td>
      <td>25</td>
      <td>30</td>
      <td>29</td>
      <td>0.25</td>
      <td>798</td>
      <td>0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>some_subject_id1</td>
      <td>3</td>
      <td>50</td>
      <td>32</td>
      <td>0</td>
      <td>0.75</td>
      <td>742</td>
      <td>1</td>
    </tr>
    <tr>
      <th>8</th>
      <td>some_subject_id2</td>
      <td>0</td>
      <td>10</td>
      <td>20</td>
      <td>0</td>
      <td>0.50</td>
      <td>729</td>
      <td>1</td>
    </tr>
    <tr>
      <th>9</th>
      <td>some_subject_id2</td>
      <td>1</td>
      <td>15</td>
      <td>40</td>
      <td>23</td>
      <td>0.50</td>
      <td>790</td>
      <td>0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>some_subject_id2</td>
      <td>2</td>
      <td>25</td>
      <td>30</td>
      <td>29</td>
      <td>0.25</td>
      <td>207</td>
      <td>0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>some_subject_id2</td>
      <td>3</td>
      <td>50</td>
      <td>32</td>
      <td>0</td>
      <td>0.75</td>
      <td>526</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Ok, take a careful look at this output.  This is a dataframe with 3 subjects worth of data.  The first column is the subject id.  The second is the trial number but notice how it starts at 0 and counts up to 3 and then stops when a new subject id begins.  Next is the stimulus definitions (certain, upper_risk, lower_risk, prob, etc…) and the responses.  This is exactly the way people usually code a data file for a cognitive or perceptual experiment.  It is “tidy” and includes all the information in a handy way we can use to analyze the data later.  Here we <strong>generated</strong> the data with a simple program that I wrote in the cell above but generally we write a more complex program to handle this including showing the stimlus to the subject, recording their reaction time and so forth.  This simple program is a proxy for that more complex program but shows you the important principle of how to <strong>organize</strong> your data in preparation for analysis.  The analysis itself is what we will contemplate over the next several chapters.</p>
</div>
</div>
<div class="section" id="the-split-apply-combine-workflow">
<h2><span class="section-number">6.12. </span>The Split-Apply-Combine Workflow<a class="headerlink" href="#the-split-apply-combine-workflow" title="Permalink to this headline">¶</a></h2>
<p>Perhaps one of the most common data analysis steps is known at the <strong>split-apply-combine</strong> workflow.  Helping with this workflow is one of the more interesting and powerful features of Pandas (and other dataframe) libraries.</p>
<p>The <strong>split-apply-combine</strong> workflow refers to a very common sequence of data analysis steps that data analysts have to make.  Usually a dataset arrives with multiple sub-units inside it.  For example, we might get a .csv file that has all the trials of an experiment from several subjects.  Often we want to perform analyses that aggregate across these various subject categories.  For example we might want to analyze the performance of each subject.  Or alternatively we might want to analyze the difficulty of each item on the test.</p>
<p>Both of these analyses require us to <strong>split</strong> the larger dataframe up into pieces and perform and analysis on each of these pieces.  The step where you perform this analysis is called <strong>apply</strong>.  So we break the bigger dataframe up into pieces, apply an analysis to each piece.  The final step is to <strong>combine</strong> the results of those analyses back into a new dataframe structure for further analysis.</p>
<p><a class="reference internal" href="#split-apply-combine"><span class="std std-numref">Fig. 6.1</span></a> tries to emphasize these steps:</p>
<div class="figure align-default" id="split-apply-combine">
<a class="reference internal image-reference" href="../../_images/split-apply-combine.png"><img alt="../../_images/split-apply-combine.png" src="../../_images/split-apply-combine.png" style="width: 800px;" /></a>
<p class="caption"><span class="caption-number">Fig. 6.1 </span><span class="caption-text">Illustration of the split-apply-combine workflow!</span><a class="headerlink" href="#split-apply-combine" title="Permalink to this image">¶</a></p>
</div>
<p>On the left we begin with our original dataframe (<code class="docutils literal notranslate"><span class="pre">df</span></code>) which has two columns.  One column is categorical and takes on values ‘A’, ‘B’, or ‘C’ while the second column is numeric.  The first step of the split-apply-combine workflow is that we might want to split the original dataframe into smaller groups based on the value of one or more of the columns.  For this example it makes sense to break the original dataframe into smaller dataframes called “groups” based on the value of <code class="docutils literal notranslate"><span class="pre">col1</span></code> (that is to say  if the row is in category ‘A’,’B’, or ‘C’).  The method that does this in Pandas is <code class="docutils literal notranslate"><span class="pre">.groupby</span></code> and we will discuss it in a moment.  The result of the groupby operation is a partitioning of the original dataframe into smallers sets (called groups) which are the rows of the original dataframe just reorganized.  The reorganization is such that all the rows that share the same value on the specified column are group together.  For instance in <a class="reference internal" href="#split-apply-combine"><span class="std std-numref">Fig. 6.1</span></a> all the rows that had value ‘A’ in <code class="docutils literal notranslate"><span class="pre">col1</span></code> are placed into the same group separate from all the rows that had value ‘B’ in <code class="docutils literal notranslate"><span class="pre">col1</span></code> and so forth.  This is the <strong>split</strong> operation.</p>
<p>Next there are several things we can do to each of the groups.  We can iterate down them in a for loop for instance (more on that later) but also there are methods that will quickly compute various descriptives statistics to each group, or allow you to “apply” a custom function to each group.  This custom function could be quite complex and so it allows you do do a lot of additional processing of the groups.  The syntax for this tends to be very compact and helps to limit bugs so it is helpful to learn.</p>
<p>Let’s begin by the simple example in <a class="reference internal" href="#split-apply-combine"><span class="std std-numref">Fig. 6.1</span></a>:</p>
<p>Here is the dataframe:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sac_df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;col1&quot;</span><span class="p">:[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;A&#39;</span><span class="p">],</span><span class="s2">&quot;col2&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">]})</span>
<span class="n">sac_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>col1</th>
      <th>col2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>A</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>B</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>C</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>C</td>
      <td>4</td>
    </tr>
    <tr>
      <th>4</th>
      <td>B</td>
      <td>2</td>
    </tr>
    <tr>
      <th>5</th>
      <td>B</td>
      <td>5</td>
    </tr>
    <tr>
      <th>6</th>
      <td>A</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Next we will group the rows by the values in <code class="docutils literal notranslate"><span class="pre">col1</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sac_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;pandas.core.groupby.generic.DataFrameGroupBy object at 0x11809eac8&gt;
</pre></div>
</div>
</div>
</div>
<p>The result here doesn’t print out the individual groups but instead returns a <code class="docutils literal notranslate"><span class="pre">pandas.core.groupby.generic.DataFrameGroupBy</span></code> object.  However we can print out the groups using iteration:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">group_df</span> <span class="ow">in</span> <span class="n">sac_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-----&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">group_df</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>A
-----
  col1  col2
0    A     1
6    A     3


B
-----
  col1  col2
1    B     2
4    B     2
5    B     5


C
-----
  col1  col2
2    C     3
3    C     4
</pre></div>
</div>
</div>
</div>
<p>As you can see, the rows have been sorted into groups based on the value in <code class="docutils literal notranslate"><span class="pre">col1</span></code>.  Since there are three distinct/unique values in <code class="docutils literal notranslate"><span class="pre">col1</span></code> there are three groups here but if there were more distinct values there would be more groups.</p>
<p>Next we compute the sum() which applies the sum to each group.  We can chain these operations in a sequence:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sac_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>col2</th>
    </tr>
    <tr>
      <th>col1</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>A</th>
      <td>4</td>
    </tr>
    <tr>
      <th>B</th>
      <td>9</td>
    </tr>
    <tr>
      <th>C</th>
      <td>7</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The result here is a new dataframe where the sum of the values of <code class="docutils literal notranslate"><span class="pre">col2</span></code> for the different subgroups ‘A’,’B’, ‘C’ has been computed.</p>
<p>:::{tip}
Check the results by hand to make sure you understand what has been calculated here!
:::</p>
<p>Ok this example is fairly simple, what if we consider a more complex dataframe with more columns:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sac_df_2</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;col1&quot;</span><span class="p">:[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;A&#39;</span><span class="p">],</span><span class="s2">&quot;col2&quot;</span><span class="p">:[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">],</span><span class="s2">&quot;col3&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="s2">&quot;col4&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.1</span><span class="p">,</span><span class="mf">2.3</span><span class="p">,</span><span class="mf">12.</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mf">22.21</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mf">0.5</span><span class="p">]})</span>
<span class="n">sac_df_2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>col1</th>
      <th>col2</th>
      <th>col3</th>
      <th>col4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>A</td>
      <td>A</td>
      <td>1</td>
      <td>1.10</td>
    </tr>
    <tr>
      <th>1</th>
      <td>B</td>
      <td>A</td>
      <td>2</td>
      <td>2.30</td>
    </tr>
    <tr>
      <th>2</th>
      <td>C</td>
      <td>A</td>
      <td>3</td>
      <td>12.00</td>
    </tr>
    <tr>
      <th>3</th>
      <td>C</td>
      <td>B</td>
      <td>4</td>
      <td>16.00</td>
    </tr>
    <tr>
      <th>4</th>
      <td>B</td>
      <td>B</td>
      <td>2</td>
      <td>22.21</td>
    </tr>
    <tr>
      <th>5</th>
      <td>B</td>
      <td>B</td>
      <td>5</td>
      <td>9.00</td>
    </tr>
    <tr>
      <th>6</th>
      <td>A</td>
      <td>B</td>
      <td>3</td>
      <td>0.50</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>If we <code class="docutils literal notranslate"><span class="pre">.groupby()</span></code> column 1 (<code class="docutils literal notranslate"><span class="pre">col1</span></code>) we get the same groups as before but notice they includes all the rows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">group_df</span> <span class="ow">in</span> <span class="n">sac_df_2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-----&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">group_df</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>A
-----
  col1 col2  col3  col4
0    A    A     1   1.1
6    A    B     3   0.5


B
-----
  col1 col2  col3   col4
1    B    A     2   2.30
4    B    B     2  22.21
5    B    B     5   9.00


C
-----
  col1 col2  col3  col4
2    C    A     3  12.0
3    C    B     4  16.0
</pre></div>
</div>
</div>
</div>
<p>And now the apply-combine step computes the sum for all the numeric columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sac_df_2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>col3</th>
      <th>col4</th>
    </tr>
    <tr>
      <th>col1</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>A</th>
      <td>4</td>
      <td>1.60</td>
    </tr>
    <tr>
      <th>B</th>
      <td>9</td>
      <td>33.51</td>
    </tr>
    <tr>
      <th>C</th>
      <td>7</td>
      <td>28.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Of course you don’t have to apply the sum to all the columns.  If you just want to analyze <code class="docutils literal notranslate"><span class="pre">col4</span></code> you can select it out before applying the sum:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sac_df_2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">)[</span><span class="s1">&#39;col4&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>col1
A     1.60
B    33.51
C    28.00
Name: col4, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>You can also group using more than one column as the grouping factors.  For example in <code class="docutils literal notranslate"><span class="pre">sac_df_2</span></code> there are actually two columns that have discrete values and so you might want to make groups that are all combinations of those two factors.  If so you just pass a list of grouping columns to <code class="docutils literal notranslate"><span class="pre">.groupby()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">group_df</span> <span class="ow">in</span> <span class="n">sac_df_2</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span><span class="s1">&#39;col2&#39;</span><span class="p">]):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-----&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">group_df</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;A&#39;, &#39;A&#39;)
-----
  col1 col2  col3  col4
0    A    A     1   1.1


(&#39;A&#39;, &#39;B&#39;)
-----
  col1 col2  col3  col4
6    A    B     3   0.5


(&#39;B&#39;, &#39;A&#39;)
-----
  col1 col2  col3  col4
1    B    A     2   2.3


(&#39;B&#39;, &#39;B&#39;)
-----
  col1 col2  col3   col4
4    B    B     2  22.21
5    B    B     5   9.00


(&#39;C&#39;, &#39;A&#39;)
-----
  col1 col2  col3  col4
2    C    A     3  12.0


(&#39;C&#39;, &#39;B&#39;)
-----
  col1 col2  col3  col4
3    C    B     4  16.0
</pre></div>
</div>
</div>
</div>
<p>Then the sum operation will apply to all combinations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sac_df_2</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span><span class="s1">&#39;col2&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>col3</th>
      <th>col4</th>
    </tr>
    <tr>
      <th>col1</th>
      <th>col2</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">A</th>
      <th>A</th>
      <td>1</td>
      <td>1.10</td>
    </tr>
    <tr>
      <th>B</th>
      <td>3</td>
      <td>0.50</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">B</th>
      <th>A</th>
      <td>2</td>
      <td>2.30</td>
    </tr>
    <tr>
      <th>B</th>
      <td>7</td>
      <td>31.21</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">C</th>
      <th>A</th>
      <td>3</td>
      <td>12.00</td>
    </tr>
    <tr>
      <th>B</th>
      <td>4</td>
      <td>16.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The output here looks a little different because the columns are organized hierarchically (the specific terms is that the index is hierarchical).  But we can call <code class="docutils literal notranslate"><span class="pre">.reset_index()</span></code> a function we mentioned earlier to delete the hierarchical index and flatten things back to a standard data frame.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sac_df_2</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span><span class="s1">&#39;col2&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>col1</th>
      <th>col2</th>
      <th>col3</th>
      <th>col4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>A</td>
      <td>A</td>
      <td>1</td>
      <td>1.10</td>
    </tr>
    <tr>
      <th>1</th>
      <td>A</td>
      <td>B</td>
      <td>3</td>
      <td>0.50</td>
    </tr>
    <tr>
      <th>2</th>
      <td>B</td>
      <td>A</td>
      <td>2</td>
      <td>2.30</td>
    </tr>
    <tr>
      <th>3</th>
      <td>B</td>
      <td>B</td>
      <td>7</td>
      <td>31.21</td>
    </tr>
    <tr>
      <th>4</th>
      <td>C</td>
      <td>A</td>
      <td>3</td>
      <td>12.00</td>
    </tr>
    <tr>
      <th>5</th>
      <td>C</td>
      <td>B</td>
      <td>4</td>
      <td>16.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The final result here is itself a dataframe and so can be use for further analysis and plotting.</p>
<div class="section" id="changing-the-apply-step">
<h3><span class="section-number">6.12.1. </span>Changing the “apply” step<a class="headerlink" href="#changing-the-apply-step" title="Permalink to this headline">¶</a></h3>
<p>In the example we considered so far we summed the columns within in group.  However there are actually several types of things you can do to groups  in the “apply” step:</p>
<ul class="simple">
<li><p><strong>Aggregation</strong>: computes a descriptive statistic like a sum, mean, max, min, etc…</p></li>
<li><p><strong>Transformation</strong>: perform a group-specific computation like standardsize (z-score) within a group</p></li>
<li><p><strong>Filtration</strong>: discard data from small groups or filter data from a group based on the sum or mean in that group (e.g., removing outliers in a group)</p></li>
</ul>
<div class="section" id="aggregation">
<h4><span class="section-number">6.12.1.1. </span>Aggregation<a class="headerlink" href="#aggregation" title="Permalink to this headline">¶</a></h4>
<p>So far we computed the sum of columns within each group.  However there are several other functions you can use.  For example to compute the median instead:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sac_df_2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>col3</th>
      <th>col4</th>
    </tr>
    <tr>
      <th>col1</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>A</th>
      <td>2.0</td>
      <td>0.8</td>
    </tr>
    <tr>
      <th>B</th>
      <td>2.0</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>C</th>
      <td>3.5</td>
      <td>14.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Here is a list of common aggregation functions:</p>
<table class="table" id="aggregation-table">
<caption><span class="caption-number">Table 6.1 </span><span class="caption-text">Example aggregation functions</span><a class="headerlink" href="#aggregation-table" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">.mean()</span></code></p></td>
<td><p>Compute mean of groups</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sum()</span></code></p></td>
<td><p>Compute sum of group values</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">size()</span></code></p></td>
<td><p>Compute group sizes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">count()</span></code></p></td>
<td><p>Compute count of group</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">std()</span></code></p></td>
<td><p>Standard deviation of groups</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">var()</span></code></p></td>
<td><p>Compute variance of groups</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sem()</span></code></p></td>
<td><p>Standard error of the mean of groups</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">describe()</span></code></p></td>
<td><p>Generates descriptive statistics</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">first()</span></code></p></td>
<td><p>Compute first of group values</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">last()</span></code></p></td>
<td><p>Compute last of group values</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">nth()</span></code></p></td>
<td><p>Take nth value, or a subset if n is a list</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min()</span></code></p></td>
<td><p>Compute min of group values</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max()</span></code></p></td>
<td><p>Compute max of group values</p></td>
</tr>
</tbody>
</table>
<p>In addition there is a special <code class="docutils literal notranslate"><span class="pre">.agg()</span></code> (or <code class="docutils literal notranslate"><span class="pre">.aggregate()</span></code>) function that you can pass mulitple functions to from other libraries:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sac_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>co32</th>
      <th>col4</th>
    </tr>
    <tr>
      <th>col1</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>A</th>
      <td>4</td>
      <td>1.60</td>
    </tr>
    <tr>
      <th>B</th>
      <td>9</td>
      <td>33.51</td>
    </tr>
    <tr>
      <th>C</th>
      <td>7</td>
      <td>28.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The previous example used the numpy <code class="docutils literal notranslate"><span class="pre">np.sum()</span></code> function.  You can also provide multiple functions at once:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sac_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>col1</th>
      <th>col2</th>
      <th>co32</th>
      <th>col4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>A</td>
      <td>A</td>
      <td>1</td>
      <td>1.10</td>
    </tr>
    <tr>
      <th>1</th>
      <td>B</td>
      <td>A</td>
      <td>2</td>
      <td>2.30</td>
    </tr>
    <tr>
      <th>2</th>
      <td>C</td>
      <td>A</td>
      <td>3</td>
      <td>12.00</td>
    </tr>
    <tr>
      <th>3</th>
      <td>C</td>
      <td>B</td>
      <td>4</td>
      <td>16.00</td>
    </tr>
    <tr>
      <th>4</th>
      <td>B</td>
      <td>B</td>
      <td>2</td>
      <td>22.21</td>
    </tr>
    <tr>
      <th>5</th>
      <td>B</td>
      <td>B</td>
      <td>5</td>
      <td>9.00</td>
    </tr>
    <tr>
      <th>6</th>
      <td>A</td>
      <td>B</td>
      <td>3</td>
      <td>0.50</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sac_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">col2</th>
    </tr>
    <tr>
      <th></th>
      <th>sum</th>
      <th>mean</th>
      <th>std</th>
    </tr>
    <tr>
      <th>col1</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>A</th>
      <td>4</td>
      <td>2.0</td>
      <td>1.414214</td>
    </tr>
    <tr>
      <th>B</th>
      <td>9</td>
      <td>3.0</td>
      <td>1.732051</td>
    </tr>
    <tr>
      <th>C</th>
      <td>7</td>
      <td>3.5</td>
      <td>0.707107</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Which as you can see actually computes mutiple statistics on each group.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>You can read more about aggregation in the Pandos docs on <a class="reference external" href="https://pandas.pydata.org/docs/user_guide/groupby.html#aggregation">Aggregation</a>.</p>
</div>
</div>
<div class="section" id="transform">
<h4><span class="section-number">6.12.1.2. </span>Transform<a class="headerlink" href="#transform" title="Permalink to this headline">¶</a></h4>
<p>Aggregation methods take in a grouped dataframe and compute a single number of statistics for each group.  In contrast transform applies a function to a column and returns a column of the same size usually.  This allows you to change the data within each sub group.  A common version of this for behavioral science is to z-score data within a group to detect outliers, etc…  Since that is the most common use case we’ll focus on that here.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sac_df_2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span><span class="o">/</span><span class="n">x</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>col3</th>
      <th>col4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.707107</td>
      <td>0.707107</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-0.577350</td>
      <td>-0.875545</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.707107</td>
      <td>-0.707107</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.707107</td>
      <td>0.707107</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-0.577350</td>
      <td>1.089743</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1.154701</td>
      <td>-0.214198</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.707107</td>
      <td>-0.707107</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The transform function takes as argument a <code class="docutils literal notranslate"><span class="pre">lambda</span></code> function which is a way to write short one-line functions in python.  This function takes 1 argument (<code class="docutils literal notranslate"><span class="pre">x</span></code>) which is the dataframe coresponding to each column of each group.  It then computes the z-score of this data within the group and column and the result is combined into a new dataframe.  This new data frame has the same column names as the original but we might want to rename them:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">transformed_df</span><span class="o">=</span><span class="n">sac_df_2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span><span class="o">/</span><span class="n">x</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>
<span class="n">transformed_df</span><span class="o">=</span><span class="n">transformed_df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;col3&#39;</span><span class="p">:</span><span class="s1">&#39;col3_trans&#39;</span><span class="p">,</span> <span class="s1">&#39;col4&#39;</span><span class="p">:</span> <span class="s1">&#39;col4_trans&#39;</span><span class="p">})</span>
<span class="n">transformed_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>col3_trans</th>
      <th>col4_trans</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.707107</td>
      <td>0.707107</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-0.577350</td>
      <td>-0.875545</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.707107</td>
      <td>-0.707107</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.707107</td>
      <td>0.707107</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-0.577350</td>
      <td>1.089743</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1.154701</td>
      <td>-0.214198</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.707107</td>
      <td>-0.707107</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>To add these transformed columns back into our original data frame as new column we can use the <code class="docutils literal notranslate"><span class="pre">.join()</span></code> function which is like <code class="docutils literal notranslate"><span class="pre">.concat()</span></code> which we leared about earlier but combines the columns from a dataframe rather than appending the rows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sac_df_2</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">transformed_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>col1</th>
      <th>col2</th>
      <th>col3</th>
      <th>col4</th>
      <th>col3_trans</th>
      <th>col4_trans</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>A</td>
      <td>A</td>
      <td>1</td>
      <td>1.10</td>
      <td>-0.707107</td>
      <td>0.707107</td>
    </tr>
    <tr>
      <th>1</th>
      <td>B</td>
      <td>A</td>
      <td>2</td>
      <td>2.30</td>
      <td>-0.577350</td>
      <td>-0.875545</td>
    </tr>
    <tr>
      <th>2</th>
      <td>C</td>
      <td>A</td>
      <td>3</td>
      <td>12.00</td>
      <td>-0.707107</td>
      <td>-0.707107</td>
    </tr>
    <tr>
      <th>3</th>
      <td>C</td>
      <td>B</td>
      <td>4</td>
      <td>16.00</td>
      <td>0.707107</td>
      <td>0.707107</td>
    </tr>
    <tr>
      <th>4</th>
      <td>B</td>
      <td>B</td>
      <td>2</td>
      <td>22.21</td>
      <td>-0.577350</td>
      <td>1.089743</td>
    </tr>
    <tr>
      <th>5</th>
      <td>B</td>
      <td>B</td>
      <td>5</td>
      <td>9.00</td>
      <td>1.154701</td>
      <td>-0.214198</td>
    </tr>
    <tr>
      <th>6</th>
      <td>A</td>
      <td>B</td>
      <td>3</td>
      <td>0.50</td>
      <td>0.707107</td>
      <td>-0.707107</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The end result is that we z-scored <code class="docutils literal notranslate"><span class="pre">col3</span></code> and <code class="docutils literal notranslate"><span class="pre">col4</span></code> within the groups implies by <code class="docutils literal notranslate"><span class="pre">col1</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>You can read more about aggregation in the Pandos docs on <a class="reference external" href="https://pandas.pydata.org/docs/user_guide/groupby.html#transformation">Transformation</a>.</p>
</div>
</div>
<div class="section" id="filtration">
<h4><span class="section-number">6.12.1.3. </span>Filtration<a class="headerlink" href="#filtration" title="Permalink to this headline">¶</a></h4>
<p>With the filtration <em>apply</em> step you provide a function that returns true or false for each group.  Any group that the function returns <code class="docutils literal notranslate"><span class="pre">True</span></code> for is kept for the new dataframe and any group that returns <code class="docutils literal notranslate"><span class="pre">False</span></code> is dropped.
For example this step removes rows from the dataframe that belong to groups with only one or two members:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dff</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;aabbbbcc&#39;</span><span class="p">)})</span>
<span class="n">dff</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>a</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>a</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>b</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>b</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>b</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5</td>
      <td>b</td>
    </tr>
    <tr>
      <th>6</th>
      <td>6</td>
      <td>c</td>
    </tr>
    <tr>
      <th>7</th>
      <td>7</td>
      <td>c</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dff</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>A</th>
      <th>B</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>b</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>b</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>b</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5</td>
      <td>b</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Notice ‘a’ and ‘c’ entries have been removed because those groups have only two members each.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>You can read more about aggregation in the Pandos docs on <a class="reference external" href="https://pandas.pydata.org/docs/user_guide/groupby.html#filtration">Filtration</a>.</p>
</div>
</div>
</div>
</div>
<div class="section" id="further-reading-and-resources">
<h2><span class="section-number">6.13. </span>Further Reading and Resources<a class="headerlink" href="#further-reading-and-resources" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>10 minute <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/10min.html">intro to pandas</a></p></li>
<li><p>A longer standalone video <a class="reference external" href="https://www.youtube.com/watch?v=vmEHCJofslg">on how to use pandas</a></p></li>
<li><p>A visual guide to <a class="reference external" href="https://towardsdatascience.com/how-to-use-the-split-apply-combine-strategy-in-pandas-groupby-29e0eb44b62e">split-apply-combine</a> strategies in Pandas by Towards data science</p></li>
<li><p><a class="reference external" href="https://medium.com/analytics-vidhya/split-apply-combine-strategy-for-data-mining-4fd6e2a0cc99">Split-Apply-combine strategy for data mining</a> includes some additional facts and features of this approach</p></li>
</ul>
</div>
<div class="section" id="references">
<h2><span class="section-number">6.14. </span>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p id="id5"><dl class="citation">
<dt class="label" id="id65"><span class="brackets"><a class="fn-backref" href="#id1">Glu13</a></span></dt>
<dd><p>R. Glushko. <em>The discipline or organizing</em>. MIT Press, 2013.</p>
</dd>
<dt class="label" id="id67"><span class="brackets"><a class="fn-backref" href="#id2">Har16</a></span></dt>
<dd><p>M. Harrison. <em>Learning the Pandas Library: Python Tools for Data Munging, Analysis, and Visual: First Edition</em>. hairysun.com, 2016.</p>
</dd>
<dt class="label" id="id66"><span class="brackets"><a class="fn-backref" href="#id4">WG17</a></span></dt>
<dd><p>H. Wickham and G. Grolemund. <em>R for Data Science</em>. O'Reilly, 2017.</p>
</dd>
</dl>
</p>
<hr class="footnotes docutils" />
<dl class="footnote brackets">
<dt class="label" id="columnbased"><span class="brackets"><a class="fn-backref" href="#id3">1</a></span></dt>
<dd><p>Internally, pandas is primarily organized using columns.  This just means that the computer code underneath pandas likes adding columns and hates adding new rows one at a time.  It is just a thing.  Thus, adding one row at a time is very inefficient.  As a result it is usually best to get all your rows set and then create the dataframe.</p>
</dd>
</dl>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapters/05"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="../04/00-researchdesign.html" title="previous page"><span class="section-number">5. </span>A brief introduction to research design</a>
    <a class='right-next' id="next-link" href="../06/00-plots.html" title="next page"><span class="section-number">7. </span>Visualizing Data</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Todd Gureckis<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>